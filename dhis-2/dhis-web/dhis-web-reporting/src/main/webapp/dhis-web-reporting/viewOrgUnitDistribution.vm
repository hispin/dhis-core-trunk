<script type="text/javascript">
	jQuery(document).ready(function() {
		selectionTreeSelection.setMultipleSelectionAllowed( false );
		selectionTreeSelection.setListenerFunction( organisationUnitSelected );
		selectionTree.clearSelectedOrganisationUnits();
		selectionTree.buildSelectionTree();
	});

	var i18n_select_group_set = '$encoder.jsEscape( $i18n.getString( "please_select_group_set" ) , "'")';
	var i18n_select_org_unit = '$encoder.jsEscape( $i18n.getString( "please_select_org_unit" ) , "'")';
</script>

<h3>$i18n.getString( "orgunit_distribution" )</h3>

<!-- Criteria -->

<table>

<tr><th>$i18n.getString( "select_org_unit" )</th></tr>

<tr>
<td>
<div id="selectionTree" style="width:325px; height:200px"></div>
</td>

<td valign="bottom">
<select id="groupSetId" name="groupSetId" style="width:281px">
<option value="0">[ $i18n.getString( "select_group_set" ) ]</option>
#foreach( $groupSet in $groupSets )
<option value="$groupSet.id"
#if( $selectedGroupSet.id && $groupSet.id == $selectedGroupSet.id ) selected="selected"#end
>$!encoder.htmlEncode( $groupSet.name )</option>
#end
</select><br><br>

<input type="button" value="$i18n.getString( 'get_report' )" style="width:140px" onclick="displayOrgUnitDistribution( 'html' )" />
<input type="button" value="$i18n.getString( 'get_chart' )" style="width:140px" onclick="displayOrgUnitDistributionChart()" /><br><br>

<input type="button" value="$i18n.getString( 'get_report_as_pdf' )" style="width:140px" onclick="getOrgUnitDistribution( 'pdf' )" />
<input type="button" value="$i18n.getString( 'get_report_as_xls' )" style="width:140px" onclick="getOrgUnitDistribution( 'xls' )" /><br>
<input type="button" value="$i18n.getString( 'get_report_as_csv' )" style="width:140px" onclick="getOrgUnitDistribution( 'csv' )" />

</td>
</tr>

<tr><td style="height:10px"></td></tr>

</table>

#parse( "dhis-web-commons/loader/loader.vm" )

<!-- Table -->

<div id="tableDiv"></div>

<!-- Chart -->

<div id="chartDiv" style="display:none"><img src="" id="chartImg"></div>
