
<h3>$i18n.getString( "dataset_report" )</h3>

<form id="reportForm" name="reportForm" action="generateCustomDataSetReport.action" method="post">	

<table>
	<tr>
	  	<th colspan="2">$i18n.getString( "criteria" )</th>
	</tr>
	<tr>
		<td><label for="dataSetId">$i18n.getString( "dataset" )</label></td>
		<td>
			<select id="dataSetId" name="dataSetId" style="width:325px">
			<option value="">[ $i18n.getString( "select" ) ]</option>
				#foreach( $dataSet in $dataSets )
				<option value="$dataSet.id">$encoder.htmlEncode( $dataSet.name )</option>
				#end
			</select>
		</td>
	</tr>
	
	<tr>
		<td><label for="selectedPeriodIndex">$i18n.getString( "reporting_period" )</label></td>
		<td>        
			<input type="button" style="width:50px" value="$i18n.getString( 'prev' )" onclick="getAvailablePeriods( 'periodType', 'periodId', 'periodId', '-1' )"><input
				   type="button" style="width:50px" value="$i18n.getString( 'next' )" onclick="getAvailablePeriods( 'periodType', 'periodId', 'periodId', '1' )">
			<select id="periodType" name="periodType" style="min-width:222px" onchange="getAvailablePeriods( 'periodType', 'periodId', 'periodId', '0' )">
				<option value="">[ $i18n.getString( "select_period_type_all" ) ]</option>
				#foreach ( $type in $periodTypes )
					<option value="$type.name">$type.name</option>
				#end
			</select><br>
			
	        <select id="periodId" name="periodId" style="width:325px">
	        </select>
		</td>
  </tr>
  <tr>  	
      <td><label>$i18n.getString( "use_data_for" )<br>$i18n.getString( "selected_unit_only" )</label></td>
      <td><input type="checkbox" id="selectedUnitOnly" name="selectedUnitOnly" value="true"></td>
  </tr>
  <tr>
  	<td colspan="2" style="height:10px"></td>
  </tr>
</table>
  
<table>	
  <tr>	
    <td>$i18n.getString( "reporting_organisation_unit" )</td>	
  </tr>  
  <tr>	
	<td>
        <div id="selectionTree" style="width:40em;height:30em;overflow:auto;border:1px solid #cccccc">			
			<script type="text/javascript">
          		selectionTreeSelection.setMultipleSelectionAllowed( false );
				selectionTree.clearSelectedOrganisationUnits();
          		selectionTree.buildSelectionTree();
        	</script>										
		</div>		
    </td>
  </tr>  
  <tr>  
	<td><input type="button" value="$i18n.getString( "generate" )" style="width:115px" onclick="validateDataSetReport()"></td>
	<td></td>		
  </tr>  
</table>
 
</form>

<span id="message">$!message</span>

<script type="text/javascript">
    var i18n_select_data_set = '$encoder.jsEscape( $i18n.getString( "select_data_set" ), "'")';
    var i18n_select_period = '$encoder.jsEscape( $i18n.getString( "select_period" ), "'")';
    var i18n_select_organisation_unit = '$encoder.jsEscape( $i18n.getString( "select_organisation_unit" ), "'")';
    var i18n_generating_report = '$encoder.jsEscape( $i18n.getString( "generating_report" ), "'")';    
</script>
