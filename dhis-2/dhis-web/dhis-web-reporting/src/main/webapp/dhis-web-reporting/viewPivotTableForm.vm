
<style type="text/css">

.pivot td
{
  border: 1px solid #d0d0d0;
  padding-top: 2px;
  padding-bottom: 3px;
  padding-left: 10px;
  padding-right: 10px;
}

div#criteria
{
  position: relative;
  left: 2px;
  width: 265px;
  height: 470px;
  border: 1px solid #b0b0b0;
  background-color: #d9ece1;
  padding-left: 20px;
  margin-bottom: 6px;
}

div#pivot
{
  position: relative;
  left: 2px;
  width: 265px;
  height: 137px;
  border: 1px solid #b0b0b0;
  background-color: #d9ece1;
  padding-left: 20px;
  margin-bottom: 6px;
}

td.column
{
  background-color: #dae6f8;
  min-width: 60px;
  text-align: center;
}

td.row
{
  background-color: #dae6f8;
  min-width: 120px;
}

td.cell
{
  text-align: center;
  cursor: pointer;
}

div#pivotMenu
{
  position: absolute;
  display: none;
}

</style>

<!-- Control panel -->

<input type="button" value='$i18n.getString( "data" )' style="width:80px" onclick="showCriteria()">
<input type="button" value='$i18n.getString( "pivot" )' style="width:80px" onclick="showPivot()">&nbsp;
<label id="dataLabel" style="color:#606060"></label>
<hr style="height:1px; color:#d9ece1">

<!-- Criteria -->

<div id="criteria" style="display:none">

<p>
<label>$i18n.getString( "indicator_group" )</label>
<select id="indicatorGroup" style="width:250px">
  <option value="-1">[ All ]</option>
  #foreach( $group in $indicatorGroups )
  <option value="${group.id}">$encoder.htmlEncode( $group.name )</option>
  #end
</select>
</p>

<p>
<label>$i18n.getString( "start_date" ) ($i18n.getString( "format.date.label" ))</label><br>
<input type="text" id="startDate" style="width:210px">
</p>

<p>
<label>$i18n.getString( "end_date" ) ($i18n.getString( "format.date.label" ))</label><br>
<input type="text" id="endDate" style="width:210px">
</p>

<p>
<label>$i18n.getString( "period_type" )</label>
<select id="periodType" style="width:250px">
  #foreach( $type in $periodTypes )
  <option value="${type.name}" #if( $type.name == "Monthly" )selected="selected"#end>$encoder.htmlEncode( $type.name )</option>
  #end
</select>
</p>

<p>
<div id="selectionTree" style="width:250px; height:200px"></div>
</p>

<p>
<input type="button" value='$i18n.getString( "get_data" )' style="width:80px" onclick="getData()">
<input type="button" value='$i18n.getString( "cancel" )' style="width:80px" onclick="hideDivs()">
</p>

</div>
 
<!-- Pivot -->

<div id="pivot" style="display:none">

<p>
<table>
  <tr>
    <td><label>$i18n.getString( "indicators" )</label></td>
    <td><input type="checkbox" id="indicatorBox" checked="checked"></td>
  </tr>
  <tr>
    <td><label>$i18n.getString( "periods" )</label></td>
    <td><input type="checkbox" id="periodBox"></td>
  </tr>
  <tr>
    <td><label>$i18n.getString( "org_units" )</label></td>
    <td><input type="checkbox" id="orgunitBox"></td>
  </tr>
</table>
</p>

<p>
<input type="button" value='$i18n.getString( "pivot" )' style="width:80px" onclick="pivotData()">
<input type="button" value='$i18n.getString( "cancel" )' style="width:80px" onclick="hideDivs()">
</p>

</div>

<!-- Pivot menu -->

<div id="pivotMenu" class="menuDropDownArea" onmouseover="cancelHideDropDownTimeout()" onmouseout="hideDropDownTimeout()">
  <ul class="menuDropDownBox">
    <li class="menuDropDownItem" onclick='viewChart( "single", "period" )'>$i18n.getString( "this_indicator_and_periods" )&nbsp;</li>
    <li class="menuDropDownItem" onclick='viewChart( "single", "orgunit" )'>$i18n.getString( "this_indicator_and_orgunits" )&nbsp;</li>
    <li class="menuDropDownItem" onclick='viewChart( "all", "period" )'>$i18n.getString( "all_indicator_and_periods" )&nbsp;</li>
    <li class="menuDropDownItem" onclick='viewChart( "all", "orgunit" )'>$i18n.getString( "all_indicator_and_orgunits" )&nbsp;</li>
  </ul>
</div>

<!-- Pivot table -->

#parse( "dhis-web-commons/loader/loader.vm" )

<div id="contentDiv">
    
<table id="pivotTable" class="pivot"></table>

</div>

<!-- I18n variables -->

<script type="text/javascript">
    var i18n_indicator_group = '$encoder.jsEscape( $i18n.getString( "indicator_group" ) , "'")';
    var i18n_start_date = '$encoder.jsEscape( $i18n.getString( "start_date" ) , "'")';
    var i18n_end_date = '$encoder.jsEscape( $i18n.getString( "end_date" ) , "'")';
    var i18n_period_type = '$encoder.jsEscape( $i18n.getString( "period_type" ) , "'")';
    var i18n_organisation_unit_level = '$encoder.jsEscape( $i18n.getString( "organisation_unit_level" ) , "'")';
</script>

<!-- Init page -->

<script type="text/javascript">
  loadListeners();
  
  selectionTreeSelection.setMultipleSelectionAllowed( false );
  selectionTreeSelection.setListenerFunction( organisationUnitSelected );
  selectionTree.clearSelectedOrganisationUnits();
  selectionTree.buildSelectionTree();
</script>

<!-- Calendar setup -->

<script type="text/javascript">
   jQuery(document).ready(function(){
		datePickerInRange( 'startDate' , 'endDate' );	
	});
</script>
