
<h3>$i18n.getString( "data_completeness_report" )</h3>

<table>
    <col width="330"/>
    <col width="5"/>
    <col width="330"/>
    <tr>
    	<th>$i18n.getString( "select_org_unit" )</th>
    	<td></td>
    	<td></td>
    </tr>
    <tr>
	    <td><div id="selectionTree" style="width:325px; height:240px"></div></td>
        <td></td>
        <td valign="bottom">
        	<input type="button" value="$i18n.getString( 'get_report_as_pdf' )" style="width:140px" onclick="getCompleteness( 'pdf' )"/>
            <input type="button" value="$i18n.getString( 'get_report_as_xls' )" style="width:140px" onclick="getCompleteness( 'xls' )"/><br>
        	<input type="button" value="$i18n.getString( 'get_report_as_csv' )" style="width:140px" onclick="getCompleteness( 'csv' )"/>
            <input type="button" value="$i18n.getString( 'configuration' )" style="width:140px" onclick="window.location.href='displayConfigureDataCompletenessForm.action'"/><br><br>        	
                	
            <input type="radio" name="criteria" id="registrationRadio" value="registration" checked="checked" onclick="displayCompleteness()"/>
            <label for="registrationRadio">$i18n.getString( 'based_on_registration' )</label><br/>
            <input type="radio" name="criteria" id="compulsoryRadio" value="compulsory" onclick="displayCompleteness()"/>
            <label for="compulsoryRadio">$i18n.getString( 'based_on_compulsory' )</label><br/>
            <input type="radio" name="criteria" id="ratioRadio" value="ratio" onclick="displayCompleteness()"/>
            <label for="ratioRadio">$i18n.getString( 'based_on_ratio' )</label><br/><br/>
            
            <!-- DataSet -->
            
        	<select id="dataSetId" name="dataSetId" style="width:325px" onchange="displayCompleteness()">
			<option value="0">[ $i18n.getString( "select_dataset_all" ) ]</option>
			#foreach( $dataSet in $dataSets )
				<option value="$dataSet.id">$dataSet.name</option>
			#end
			</select><br><br>
            
            <!-- PeriodType -->
            
            <input type="button" style="width:50px" value="$i18n.getString( 'prev' )" onclick="getPeriods( 'periodType', 'periodId', 'periodId', '-1' )"/>
			<input type="button" style="width:50px" value="$i18n.getString( 'next' )" onclick="getPeriods( 'periodType', 'periodId', 'periodId', '1' )"/>
			<select id="periodType" name="periodType" style="min-width:222px" onchange="getPeriods( 'periodType', 'periodId', 'periodId', '0' )">
				<option value="">[ $i18n.getString( "select_period_type_all" ) ]</option>
				#foreach ( $type in $periodTypes )
					<option value="$type.name">$type.name</option>
				#end
			</select><br><br>
			
			<!-- Period -->
			
            <select id="periodId" name="periodId" style="width:325px" onchange="displayCompleteness()">
            </select>
        </td>
    </tr>
    <tr>
    	<td colspan="3" height="20px"></td>
    </tr>
</table>

#parse( "dhis-web-commons/loader/loader.vm" )

<div id="contentDiv"></div>

<script type="text/javascript">
	var i18n_processing = '$encoder.jsEscape( $i18n.getString( "processing" ) , "'")';
    var i18n_dataset = '$encoder.jsEscape( $i18n.getString( "dataset" ) , "'")';
    var i18n_organisation_unit = '$encoder.jsEscape( $i18n.getString( "organisation_unit" ) , "'")';
    var i18n_actual = '$encoder.jsEscape( $i18n.getString( "actual" ) , "'")';
    var i18n_target = '$encoder.jsEscape( $i18n.getString( "target" ) , "'")';
    var i18n_percent = '$encoder.jsEscape( $i18n.getString( "percent" ) , "'")';
    var i18n_on_time = '$encoder.jsEscape( $i18n.getString( "on_time" ) , "'")';
</script>

<script type="text/javascript">
	selectionTreeSelection.setListenerFunction( displayCompleteness );
	selectionTreeSelection.setMultipleSelectionAllowed( false );
	selectionTree.clearSelectedOrganisationUnits();
	selectionTree.buildSelectionTree();
</script>
