<script type="text/javascript">
	jQuery(document).ready(function() {
		if( jQuery("#targetLine").attr("checked") === undefined )
		{
			jQuery("#targetLineValue").attr("disabled", "disabled");
			jQuery("#targetLineLabel").attr("disabled", "disabled");
		}

		jQuery("#targetLine").change(function() {
			if( jQuery("#targetLine").attr("checked") !== undefined ) {
				jQuery("#targetLineValue").removeAttr("disabled");
				jQuery("#targetLineLabel").removeAttr("disabled");
				jQuery("#targetLineValue").focus();
			} else {
				jQuery("#targetLineValue").attr("disabled", "disabled");
				jQuery("#targetLineLabel").attr("disabled", "disabled");
			}
		});
	});

    var i18n_must_select_at_least_one_indicator = '$encoder.jsEscape( $i18n.getString( "must_select_at_least_one_indicator" ), "'")';
    var i18n_must_select_at_least_one_dataelement = '$encoder.jsEscape( $i18n.getString( "must_select_at_least_one_dataelement" ), "'")';
    var i18n_must_select_at_least_one_unit = '$encoder.jsEscape( $i18n.getString( "must_select_at_least_one_unit" ), "'")';
    var i18n_must_select_at_least_one_period = '$encoder.jsEscape( $i18n.getString( "must_select_at_least_one_period" ), "'")';
	var i18n_target_line_value_must_be_provided = '$encoder.jsEscape( $i18n.getString( "target_line_value_must_be_provided" ), "'")';
	var i18n_target_line_value_must_be_number = '$encoder.jsEscape( $i18n.getString( "target_line_value_must_be_number" ), "'")';
</script>

#macro ( getHeader )
	#if ( $dimension == "period" )
	    $i18n.getString( "create_period_by_indicator_chart" )
	#elseif( $dimension == "period_dataElement" )
	    $i18n.getString( "create_period_by_dataelement_chart" )
	#elseif ( $dimension == "organisationUnit" )
	    $i18n.getString( "create_indicator_by_organisation_unit_chart" )
	#elseif ( $dimension == "organisationUnit_dataElement" )
	    $i18n.getString( "create_dataelement_by_organisation_unit_chart" )
	#elseif ( $dimension == "indicator" )
		$i18n.getString( "create_indicator_by_period_chart" )
	#elseif ( $dimension == "dataElement_period" )
		$i18n.getString( "create_dataelement_by_period_chart" )
	#end
#end

<h3>#getHeader()</h3>

<form id="chartForm" name="chartForm" method="post" action="saveChart.action">

<input type="hidden" id="id" name="id" value="$!chart.id" />
<input type="hidden" id="dimension" name="dimension" value="$!dimension" />

<table>
    <tr>
        <th colspan="2">$i18n.getString( "chart" )</th>
    </tr>
    <tr>
        <td><label for="title">$i18n.getString( "title" )</label></td>
        <td><input type="text" id="title" name="title" style="width:300px" value="$!chart.title"></td>
    </tr>

    <tr>
        <td><label for="hideSubtitle">$i18n.getString( "hide_subtitle" )</label></td>
        <td><input type="checkbox" id="hideSubtitle" name="hideSubtitle" value="true"#if( $!chart.hideSubtitle ) checked#end></td>
    </tr>

    <tr>
    	<td><label for="type">$i18n.getString( "chart_type" )</label></td>
    	<td>
    		<select id="type" name="type" style="width:300px">
    			<option value="bar"#if ( $!chart.type == "bar" ) selected#end>$i18n.getString( "bar_chart" )</option>
    			<option value="bar3d"#if ( $!chart.type == "bar3d" ) selected#end>$i18n.getString( "bar3d_chart" )</option>
    			<option value="line"#if ( $!chart.type == "line" ) selected#end>$i18n.getString( "line_chart" )</option>
    			<option value="line3d"#if ( $!chart.type == "line3d" ) selected#end>$i18n.getString( "line3d_chart" )</option>
    			<option value="pie"#if ( $!chart.type == "pie" ) selected#end>$i18n.getString( "pie_chart" )</option>
    			<option value="pie3d"#if ( $!chart.type == "pie3d" ) selected#end>$i18n.getString( "pie3d_chart" )</option>
    			<option value="stackedBar"#if ( $!chart.type == "stackedBar" ) selected#end>$i18n.getString( "stacked_bar_chart" )</option>
    			<option value="stackedBar3d"#if ( $!chart.type == "stackedBar3d" ) selected#end>$i18n.getString( "stacked_bar3d_chart" )</option>
		    </select>
	    </td>
    </tr>
    <tr>
        <td><label for="type">$i18n.getString( "chart_size" )</label></td>
        <td>
            <select id="size" name="size" style="width:300px">
                <option value="normal"#if ( $!chart.size == "normal" ) selected#end>$i18n.getString( "normal" )</option>
                <option value="wide"#if ( $!chart.size == "wide" ) selected#end>$i18n.getString( "wide" )</option>
                <option value="tall"#if ( $!chart.size == "tall" ) selected#end>$i18n.getString( "tall" )</option>
            </select>
        </td>
    </tr>
    <tr>
    	<td><label for="hideLegend">$i18n.getString( "hide_legend" )</label></td>
    	<td><input type="checkbox" id="hideLegend" name="hideLegend" value="true"#if( $!chart.hideLegend ) checked#end></td>
    </tr>
    <tr>
        <td><label for="verticalLabels">$i18n.getString( "vertical_category_labels" )</label></td>
        <td><input type="checkbox" id="verticalLabels" name="verticalLabels" value="true"#if( $!chart.verticalLabels ) checked#end></td>
    </tr>
    <tr>
        <td><label for="horizontalPlotOrientation">$i18n.getString( "horizontal_plot_orientation" )</label></td>
        <td><input type="checkbox" id="horizontalPlotOrientation" name="horizontalPlotOrientation" value="true"#if( $!chart.horizontalPlotOrientation ) checked#end></td>
    </tr>
    <tr>
        <td><label for="regression">$i18n.getString( "include_regression_line" )</label></td>
        <td><input type="checkbox" id="regression" name="regression" value="true"#if( $!chart.regression ) checked#end></td>
    </tr>
    <tr>
        <td><label for="targetLine">$i18n.getString( "include_target_line" )</label></td>
        <td><input type="checkbox" id="targetLine" name="targetLine" value="true"#if( $!chart.targetLine ) checked#end></td>
    </tr>
    <tr>
        <td><label for="targetLineValue">$i18n.getString( "target_line_value" )</label></td>
        <td><input type="text" id="targetLineValue" name="targetLineValue" style="width:80px" value="$!chart.targetLineValue"></td>
    </tr>
    <tr>
        <td><label for="targetLineLabel">$i18n.getString( "target_line_label" )</label></td>
        <td><input type="text" id="targetLineLabel" name="targetLineLabel" style="width:80px" value="$!chart.targetLineLabel"></td>
    </tr>
    #if ( $currentUser && $currentUser.hasOrganisationUnit() )
    <tr>
        <td><label for="userOrganisationUnit">$i18n.getString( "user_organisation_unit" )</label></td>
        <td><input type="checkbox" id="userOrganisationUnit" name="userOrganisationUnit" value="true"#if( $!chart.userOrganisationUnit ) checked#end></td>
    </tr>
    #end
    <tr>
        <td colspan="2" style="height:15px"></td>
    </tr>
</table>

#if ( $dimension == "period" )
	#parse( "dhis-web-reporting/addChartOrgunitOrPeriodForm.vm" )
#elseif( $dimension == "period_dataElement" )
	#parse( "dhis-web-reporting/addChartDataElementOrgunitOrPeriodForm.vm" )
#elseif ( $dimension == "organisationUnit" )
	#parse( "dhis-web-reporting/addChartOrgunitOrPeriodForm.vm" )
#elseif ( $dimension == "organisationUnit_dataElement" )
	#parse( "dhis-web-reporting/addChartDataElementOrgunitOrPeriodForm.vm" )
#elseif ( $dimension == "indicator" )
    #parse( "dhis-web-reporting/addChartIndicatorModeForm.vm" )
#elseif ( $dimension == "dataElement_period" )
	#parse( "dhis-web-reporting/addChartDataElementModeForm.vm" )
#end

<table>
    <!-- Submit -->
    
    <tr>        
        <td colspan="2">
            <input type="button" value="$i18n.getString( 'save' )" onclick="saveChart()" style="width:120px" />
            <input type="button" value="$i18n.getString( 'back' )" onclick="javascript:window.location.href='displayViewChartForm.action'" style="width:120px" />
        </td>
    </tr>
    
</table>

</form>

<span id="message"></span>
