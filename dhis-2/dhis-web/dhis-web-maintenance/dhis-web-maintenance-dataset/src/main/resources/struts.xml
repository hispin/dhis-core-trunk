<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>

  <include file="dhis-web-commons.xml"/>
  
  <package name="dhis-web-maintenance-dataset" extends="dhis-web-commons" namespace="/dhis-web-maintenance-dataset">
    
	<action name="index" class="org.hisp.dhis.dataset.action.NoAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/index.vm</param>
      <param name="menu">/dhis-web-maintenance-dataset/menu.vm</param>
	</action>
	
    <!-- Custom Value -->

    <action name="editDataSetFormCustomValues"
      class="org.hisp.dhis.dataset.action.dataentryform.SelectDataElementAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/editCustomValues.vm</param>
      <param name="javascripts">javascript/dataSet.js</param>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
        
    <!-- Dataset -->
    
    <action name="dataSet" class="org.hisp.dhis.dataset.action.DataSetListAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/dataSetList.vm</param>
      <param name="menu">/dhis-web-maintenance-dataset/menu.vm</param>
      <param name="javascripts">javascript/dataSet.js</param>
    </action>
    
    <!-- Section -->
    
    <action name="section" class="org.hisp.dhis.dataset.action.section.SectionListAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/sectionList.vm</param>
      <param name="menu">/dhis-web-maintenance-dataset/menu.vm</param>
      <param name="javascripts">javascript/section.js</param>
    </action>
    
    <action name="addSectionAction" class="org.hisp.dhis.dataset.action.section.AddSectionAction">
      <result name="input" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/addSection.vm</param>
      <param name="menu">/dhis-web-maintenance-dataset/menu.vm</param>
      <result name="success" type="redirect">section.action</result>
      <param name="javascripts">javascript/section.js</param>
    </action>
    
    <action name="validateSection"
      class="org.hisp.dhis.dataset.action.section.ValidateSectionAction">
      <result name="success" type="velocity-json">../dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
      <result name="error" type="velocity-json">../dhis-web-commons/ajax/jsonResponseError.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
    
    <action name="sortOrderSection" class="org.hisp.dhis.dataset.action.section.SortOrderSection">
      <result name="input" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/sortOrderSection.vm</param>
      <param name="menu">/dhis-web-maintenance-dataset/menu.vm</param>
      <result name="success" type="chain">section</result>
      <param name="javascripts">javascript/dataSet.js</param>
    </action>
	  
	<action name="getSection"
      class="org.hisp.dhis.dataset.action.section.GetSectionAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSectionObject.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>  
    
    <action name="editSectionAction" 
      class="org.hisp.dhis.dataset.action.section.EditSectionAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/editSection.vm</param>
      <param name="menu">/dhis-web-maintenance-dataset/menu.vm</param>
      <param name="javascripts">javascript/section.js</param>
    </action>
    
    <action name="updateSection"
      class="org.hisp.dhis.dataset.action.section.UpdateSectionAction">
      <result name="success" type="redirect">section.action</result>     
    </action>   
    
    <action name="removeSection" class="org.hisp.dhis.dataset.action.section.RemoveSectionAction">
      <result name="success" type="velocity-json">/dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
    </action>
	  
	<action name="greySection" 
      class="org.hisp.dhis.dataset.action.section.GreySectionAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/greySection.vm</param>
      <param name="menu">/dhis-web-maintenance-dataset/menu.vm</param>
      <param name="javascripts">javascript/dataSet.js,javascript/section.js</param>
    </action>  
	  
	<action name="saveSectionGreyStatus"
      class="org.hisp.dhis.dataset.action.section.SaveSectionGreyStatusAction">
      <result name="success" type="velocity">status.vm</result>     
	  <result name="onExceptionReturn">plainTextError</result>
    </action>
		
	
    <!-- Get details -->
    
    <action name="getDataSet"
      class="org.hisp.dhis.dataset.action.GetDataSetAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseDataSetObject.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
    
    <!-- Sort order -->
    
    <action name="showSortDataSetForm"
      class="org.hisp.dhis.dataset.action.GetDataSetListSortOrderAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/sortDataSetForm.vm</param>
    </action>
    
    <action name="saveDataSetSortOrder"
      class="org.hisp.dhis.dataset.action.SaveDataSetSortOrderAction">
      <result name="success" type="redirect">dataSet.action</result>
    </action>
    
    <!-- Show add DataSet form chain -->
    
    <action name="addDataSetForm"
      class="org.hisp.dhis.dataset.action.DataElementListFilteredByGroup">
      <result name="success" type="chain">dataElementGroupListAddChain</result>
      <param name="requiredAuthorities">F_DATASET_ADD</param>
    </action>
    
    <action name="dataElementGroupListAddChain"
      class="org.hisp.dhis.dataset.action.DataElementGroupListAction">
      <result name="success" type="chain">periodTypeListAddChain</result>
      <param name="requiredAuthorities">F_DATASET_ADD</param>
    </action>
    
    <action name="periodTypeListAddChain"
      class="org.hisp.dhis.dataset.action.PeriodTypeListAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/addDataSet.vm</param>
      <param name="javascripts">javascript/shortName.js,javascript/dataSet.js</param>
      <param name="requiredAuthorities">F_DATASET_ADD</param>
    </action>
    
    <!-- Show edit DataSet form chain -->
    
    <action name="editDataSetForm"
      class="org.hisp.dhis.dataset.action.DataElementListFilteredByGroup">
      <result name="success" type="chain">dataElementGroupListEditChain</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="dataElementGroupListEditChain"
      class="org.hisp.dhis.dataset.action.DataElementGroupListAction">
      <result name="success" type="chain">getDataSetEditChain</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="getDataSetEditChain"
      class="org.hisp.dhis.dataset.action.GetDataSetAction">
      <result name="success" type="chain">periodTypeListEditChain</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>    
    
    <action name="periodTypeListEditChain"
      class="org.hisp.dhis.dataset.action.PeriodTypeListAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/editDataSet.vm</param>
      <param name="javascripts">javascript/shortName.js,javascript/dataSet.js</param>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <!-- Validation, add, update, and delete -->
    
    <action name="validateDataSet"
      class="org.hisp.dhis.dataset.action.ValidateDataSetAction">
      <result name="success" type="velocity-json">../dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
      <result name="error" type="velocity-json">../dhis-web-commons/ajax/jsonResponseError.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
    
    <action name="addDataSet"
      class="org.hisp.dhis.dataset.action.AddDataSetAction">
      <result name="success" type="redirect">dataSet.action</result>
      <param name="requiredAuthorities">F_DATASET_ADD</param>
    </action>
    
    <action name="updateDataSet"
      class="org.hisp.dhis.dataset.action.UpdateDataSetAction">
      <result name="success" type="redirect">dataSet.action</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="delDataSet"
      class="org.hisp.dhis.dataset.action.DelDataSetAction">
      <result name="success" type="velocity-json">/dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
	  <result name="error" type="velocity-json">/dhis-web-commons/ajax/jsonResponseError.vm</result>
	  <param name="onExceptionReturn">plainTextError</param>
      <param name="requiredAuthorities">F_DATASET_DELETE</param>
    </action>
    
    <!-- Filter -->
    
    <action name="filterAvailableDataElementsByDataElementGroup"
      class="org.hisp.dhis.dataset.action.DataElementListFilteredByGroup">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseDataElementGroup.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
	
    <action name="filterDataElementsByDataElementGroupForSection"
      class="org.hisp.dhis.dataset.action.section.DataElementListFilteredByGroupForSection">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseDataElementGroup.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
    
    <!-- DataSet association -->
    
    <action name="defineDataSetAssociationsForm"
      class="org.hisp.dhis.dataset.action.SetupAssociationsTreeAction">
      <result name="success" type="chain">getDataSetAssociationOptions</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="defineDataSetAssociations"
      class="org.hisp.dhis.dataset.action.DefineDataSetAssociationsAction">
      <result name="success" type="redirect">dataSet.action</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="selectLevel"
      class="org.hisp.dhis.dataset.action.SelectLevelAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="unselectLevel"
      class="org.hisp.dhis.dataset.action.UnselectLevelAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="selectOrganisationUnitGroup"
      class="org.hisp.dhis.dataset.action.SelectOrganisationUnitGroupAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="unselectOrganisationUnitGroup"
      class="org.hisp.dhis.dataset.action.UnselectOrganisationUnitGroupAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="unselectAll"
      class="org.hisp.dhis.dataset.action.UnselectAllAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <action name="getDataSetAssociationOptions"
      class="org.hisp.dhis.dataset.action.GetDataSetAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/dataSetAssociations.vm</param>
      <param name="javascripts">../dhis-web-commons/oust/oust.js,javascript/associations.js</param>
      <param name="requiredAuthorities">F_DATASET_UPDATE</param>
    </action>
    
    <!-- DataEntryForm -->
        
    <action name="viewDataEntryForm"
      class="org.hisp.dhis.dataset.action.dataentryform.ViewDataEntryFormAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/viewDataEntryForm.vm</param>
      <param name="javascripts">
      javascript/FCK/fckeditor.js, javascript/FCK/editor/js/fckeditorcode_gecko.js, javascript/dataEntryForm.js</param>
      <param name="stylesheets">css/cde.css</param>
    </action>
    
    <action name="saveDataEntryForm"
      class="org.hisp.dhis.dataset.action.dataentryform.SaveDataEntryFormAction">
      <result name="success" type="redirect">dataSet.action</result>
    </action>
    
    <action name="autoSaveDataEntryForm"
      class="org.hisp.dhis.dataset.action.dataentryform.AutoSaveDataEntryFormAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
    </action>
    
    <action name="validateDataEntryForm"
      class="org.hisp.dhis.dataset.action.dataentryform.ValidateDataEntryFormAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
      <result name="input" type="velocity-xml">/dhis-web-maintenance-dataset/responseInput.vm</result>
      <result name="mismatch" type="velocity-xml">/dhis-web-maintenance-dataset/responseMismatch.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
    
    <action name="delDataEntryForm"
      class="org.hisp.dhis.dataset.action.dataentryform.DelDataEntryFormAction">
      <result name="success" type="redirect">dataSet.action</result>
      <result name="input" type="velocity-xml">/dhis-web-maintenance-dataset/responseInput.vm</result>
    </action>
    
    <action name="selectDataElement"
      class="org.hisp.dhis.dataset.action.dataentryform.SelectDataElementAction">
      <result name="success" type="velocity">selectDataElement.vm</result>
      <result name="input" type="velocity-xml">/dhis-web-maintenance-dataset/responseInput.vm</result>
    </action>
    
    <action name="getSelectedDataElements"
      class="org.hisp.dhis.dataset.action.dataentryform.GetSelectedDataElementsAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSelDataElementList.vm</result>
      <param name="javascripts">javascript/dataEntryForm.js,javascript/FCK/fckeditor.js</param>
    </action>
    
    <action name="getOptionCombos"
      class="org.hisp.dhis.dataset.action.dataentryform.GetOptionCombosAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseOptionCombo.vm</result>
      <param name="javascripts">javascript/dataEntryForm.js,javascript/FCK/fckeditor.js</param>
    </action>

    <action name="getCustomValues"
      class="org.hisp.dhis.dataset.action.dataentryform.GetCustomValuesAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseCustomValue.vm</result>
      <param name="javascripts">javascript/dataEntryForm.js,javascript/FCK/fckeditor.js</param>
    </action>
    
    <!-- Compulsory data elements -->
  
    <action name="displayCompulsoryDataElementsForm"
	  class="org.hisp.dhis.dataset.action.compulsory.GetCompulsoryDataElementsAction">
	  <result name="success" type="velocity">/main.vm</result>
	  <param name="page">/dhis-web-maintenance-dataset/compulsoryDataElementsForm.vm</param>	  
	</action>
		
	<action name="saveCompulsoryDataElements"
	  class="org.hisp.dhis.dataset.action.compulsory.SaveCompulsoryDataElementsAction">
	  <result name="success" type="redirect">dataSet.action</result>
	</action>
	
	<!-- Editor -->
	
	<action name="showAssignMultiDataSetForOrgunitForm"
	  class="org.hisp.dhis.dataset.action.editor.ShowAssignMultiDataSetForOrgunitAction">
	  <result name="success" type="velocity">/main.vm</result>
	  <param name="page">/dhis-web-maintenance-dataset/showAssignMultiDataSetForm.vm</param>
	  <param name="menu">/dhis-web-maintenance-dataset/menu.vm</param>
	  <param name="javascripts">../dhis-web-commons/oust/oust.js,
	  		javascript/shortName.js,
	  		javascript/dataSet.js,
	  		javascript/multiDataSet.js
     </param>
	</action>
	
	<action name="saveAssignMultiDataSetForOrgunit"
	  class="org.hisp.dhis.dataset.action.editor.SaveAssignMultiDataSetForOrgunitAction">
	  <result name="success" type="redirect">index.action</result>
	</action>
	
    <action name="periodTypeListEditor"
      class="org.hisp.dhis.dataset.action.PeriodTypeListAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responsePeriodTypeList.vm</result>
      <param name="requiredAuthorities">F_DATASET_ADD</param>
    </action>
	
	<action name="addDataSetEditor"
      class="org.hisp.dhis.dataset.action.editor.AddDataSetEditorAction">
	  <result name="success" type="chain">showAssignMultiDataSetForOrgunitForm</result>
      <param name="requiredAuthorities">F_DATASET_ADD</param>
    </action>
	
	<action name="validateRenameDataSetEditor"
      class="org.hisp.dhis.dataset.action.editor.ValidateRenameDataSetEditorAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
      <result name="input" type="velocity-xml">/dhis-web-maintenance-dataset/responseInput.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
		
	<action name="renameDataSetEditor"
      class="org.hisp.dhis.dataset.action.editor.RenameDataSetEditorAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
      <result name="error" type="velocity-xml">/dhis-web-maintenance-dataset/responseError.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
	
	<action name="deleteDataSetEditor"
      class="org.hisp.dhis.dataset.action.DelDataSetAction">
      <result name="success" type="velocity-xml">/dhis-web-maintenance-dataset/responseSuccess.vm</result>
      <param name="requiredAuthorities">F_DATASET_DELETE</param>
    </action>

	 <!-- PivotDataSetAssociationTableService -->
    
    <action name="displayAssociationTableForm" class="org.hisp.dhis.dataset.action.NoAction">
      <result name="success" type="velocity">/main.vm</result>
      <param name="page">/dhis-web-maintenance-dataset/viewPivotAssociationTableForm.vm</param>
      <param name="menu">/dhis-web-maintenance-dataset/menu.vm</param>
      <param name="javascripts">javascript/pivotAssociationTable.js,javascript/criteria.js</param>
      <param name="stylesheets">css/pivot.css</param>
    </action>
    
    <action name="getPivotAssociationTable" class="org.hisp.dhis.dataset.action.pivotassociation.GetPivotDataSetAssocicationTableAction">
      <result name="success" type="velocity-json">/dhis-web-maintenance-dataset/responsePivotAssociationTable.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
    
    <action name="getOrganisationUnitLevels" class="org.hisp.dhis.dataset.action.pivotassociation.GetOrganisationUnitLevelsAction">
      <result name="success" type="velocity-json">/dhis-web-maintenance-dataset/responseOrganisationUnitLevel.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
    
    <action name="getPeriodTypes" class="org.hisp.dhis.dataset.action.pivotassociation.GetPeriodTypesAction">
      <result name="success" type="velocity-json">/dhis-web-maintenance-dataset/responsePeriodType.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
    
    <action name="defineAssociation" class="org.hisp.dhis.dataset.action.pivotassociation.DefineAssociationAction">
      <result name="success" type="velocity-json">/dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
      <param name="onExceptionReturn">plainTextError</param>
    </action>
    
  </package>
</struts>
