=== modified file 'dhis-2/dhis-api/src/main/java/org/hisp/dhis/option/OptionService.java'
--- dhis-2/dhis-api/src/main/java/org/hisp/dhis/option/OptionService.java	2012-02-03 08:17:56 +0000
+++ dhis-2/dhis-api/src/main/java/org/hisp/dhis/option/OptionService.java	2012-02-03 14:47:55 +0000
@@ -44,6 +44,8 @@
     
     OptionSet getOptionSet( String uid );
     
+    OptionSet getOptionSetByName( String name );
+    
     void deleteOptionSet( OptionSet optionSet );
 
     Collection<OptionSet> getAllOptionSets();

=== modified file 'dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/option/DefaultOptionService.java'
--- dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/option/DefaultOptionService.java	2012-02-03 08:17:56 +0000
+++ dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/option/DefaultOptionService.java	2012-02-03 14:48:50 +0000
@@ -66,6 +66,11 @@
         return optionSetStore.getByUid( uid );
     }
     
+    public OptionSet getOptionSetByName( String name )
+    {
+        return optionSetStore.getByName( name );
+    }
+
     public void deleteOptionSet( OptionSet optionSet )
     {
         optionSetStore.delete( optionSet );

=== modified file 'dhis-2/dhis-services/dhis-service-patient/src/main/java/org/hisp/dhis/program/DefaultProgramDataEntryService.java'
--- dhis-2/dhis-services/dhis-service-patient/src/main/java/org/hisp/dhis/program/DefaultProgramDataEntryService.java	2012-01-11 06:17:35 +0000
+++ dhis-2/dhis-services/dhis-service-patient/src/main/java/org/hisp/dhis/program/DefaultProgramDataEntryService.java	2012-02-04 07:47:01 +0000
@@ -539,7 +539,7 @@
                     // Add ProvidedByOtherFacility checkbox
                     // -----------------------------------------------------------
 
-                    appendCode = addProvidedByOtherFacilityCheckbox( appendCode, patientDataValue, programStage );
+                    appendCode = addProvidedByOtherFacilityCheckbox( appendCode, patientDataValue );
                 }
                 else
                 {
@@ -770,7 +770,7 @@
                     // Add ProvidedByOtherFacility checkbox
                     // -----------------------------------------------------------
 
-                    appendCode = addProvidedByOtherFacilityCheckbox( appendCode, patientDataValue, programStage );
+                    appendCode = addProvidedByOtherFacilityCheckbox( appendCode, patientDataValue );
                 }
 
                 // -----------------------------------------------------------
@@ -994,7 +994,7 @@
                     // Add ProvidedByOtherFacility checkbox
                     // -----------------------------------------------------------
 
-                    appendCode = addProvidedByOtherFacilityCheckbox( appendCode, patientDataValue, programStage );
+                    appendCode = addProvidedByOtherFacilityCheckbox( appendCode, patientDataValue );
                 }
 
                 // -----------------------------------------------------------
@@ -1223,7 +1223,7 @@
                     // Add ProvidedByOtherFacility checkbox
                     // ---------------------------------------------------------
 
-                    appendCode = addProvidedByOtherFacilityCheckbox( appendCode, patientDataValue, programStage );
+                    appendCode = addProvidedByOtherFacilityCheckbox( appendCode, patientDataValue );
                 }
 
                 // -------------------------------------------------------------
@@ -1336,9 +1336,9 @@
      * @param patientDataValue: currrent PatientDataValue
      * @return full html code after append the check box
      */
-    private String addProvidedByOtherFacilityCheckbox( String appendCode, PatientDataValue patientDataValue, ProgramStage programStage )
+    private String addProvidedByOtherFacilityCheckbox( String appendCode, PatientDataValue patientDataValue )
     {
-        appendCode += "<label for=\"$PROGRAMSTAGEID_$DATAELEMENTID_facility\" title=\"is provided by another Facility ?\" ></label><input name=\"providedByAnotherFacility\"  title=\"is provided by another Facility ?\"  id=\"$PROGRAMSTAGEID_$DATAELEMENTID_facility\"  type=\"checkbox\" style=\"display:$DISPLAY;\" ";
+        appendCode += "<label for=\"$PROGRAMSTAGEID_$DATAELEMENTID_facility\" title=\"is provided by another Facility ?\" ></label><input name=\"providedByAnotherFacility\"  title=\"is provided by another Facility ?\"  id=\"$PROGRAMSTAGEID_$DATAELEMENTID_facility\"  type=\"checkbox\" ";
 
         if ( patientDataValue != null && patientDataValue.isProvidedByAnotherFacility() )
         {
@@ -1346,9 +1346,6 @@
         }
         appendCode += "onChange=\"updateProvidingFacility( $DATAELEMENTID, this )\"  >";
 
-        String display = ( programStage.getProgram().getAnonymous() ) ? "none" : "block";  
-        appendCode = appendCode.replace( "$DISPLAY", display );
-        
         return appendCode;
 
     }

=== modified file 'dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-dataadmin/src/main/resources/META-INF/dhis/beans.xml'
--- dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-dataadmin/src/main/resources/META-INF/dhis/beans.xml	2012-02-02 20:01:36 +0000
+++ dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-dataadmin/src/main/resources/META-INF/dhis/beans.xml	2012-02-03 15:46:03 +0000
@@ -333,4 +333,36 @@
 	<property name="organisationUnitService" ref="org.hisp.dhis.organisationunit.OrganisationUnitService" />
   </bean>
   
+  <!-- OptionSet -->
+  
+  <bean id="org.hisp.dhis.dataadmin.action.option.GetOptionSetListAction" class="org.hisp.dhis.dataadmin.action.option.GetOptionSetListAction"
+    scope="prototype">
+    <property name="optionService" ref="org.hisp.dhis.option.OptionService" />
+  </bean>
+  
+  <bean id="org.hisp.dhis.dataadmin.action.option.AddOptionSetAction" class="org.hisp.dhis.dataadmin.action.option.AddOptionSetAction"
+    scope="prototype">
+    <property name="optionService" ref="org.hisp.dhis.option.OptionService" />
+  </bean>
+  
+  <bean id="org.hisp.dhis.dataadmin.action.option.UpdateOptionSetAction" class="org.hisp.dhis.dataadmin.action.option.UpdateOptionSetAction"
+    scope="prototype">
+    <property name="optionService" ref="org.hisp.dhis.option.OptionService" />
+  </bean>
+  
+  <bean id="org.hisp.dhis.dataadmin.action.option.RemoveOptionSetAction" class="org.hisp.dhis.dataadmin.action.option.RemoveOptionSetAction"
+    scope="prototype">
+    <property name="optionService" ref="org.hisp.dhis.option.OptionService" />
+  </bean>
+  
+  <bean id="org.hisp.dhis.dataadmin.action.option.GetOptionSetAction" class="org.hisp.dhis.dataadmin.action.option.GetOptionSetAction"
+    scope="prototype">
+    <property name="optionService" ref="org.hisp.dhis.option.OptionService" />
+  </bean>
+  
+  <bean id="org.hisp.dhis.dataadmin.action.option.ValidateOptionSetAction" class="org.hisp.dhis.dataadmin.action.option.ValidateOptionSetAction"
+    scope="prototype">
+    <property name="optionService" ref="org.hisp.dhis.option.OptionService" />
+  </bean>
+  
 </beans>

=== modified file 'dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-dataadmin/src/main/resources/org/hisp/dhis/dataadmin/i18n_module.properties'
--- dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-dataadmin/src/main/resources/org/hisp/dhis/dataadmin/i18n_module.properties	2012-01-28 17:42:13 +0000
+++ dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-dataadmin/src/main/resources/org/hisp/dhis/dataadmin/i18n_module.properties	2012-02-04 07:19:38 +0000
@@ -380,4 +380,14 @@
 execute_now=Execute now
 execute_tasks_confirmation=Are you sure you want to execute all tasks now? Task processing might fully utilize your system resources and slow down other operations.
 no_aggregation=No aggregation
-data_elements_in_data_set_not_in_form = Data elements in data set but not in form or sections
\ No newline at end of file
+data_elements_in_data_set_not_in_form = Data elements in data set but not in form or sections
+option_set = Option set
+intro_option_set = Create the option values which would be included in data elements.
+add_option_set = Add option set
+options = Options
+option = Option 
+add_option = Add Option
+option_name_already_exists = The option name already exists
+specify_option_name = Please specify a option name
+must_include_option = Please include one or more category options
+edit_option_set = Edit option set

=== modified file 'dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-dataadmin/src/main/resources/struts.xml'
--- dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-dataadmin/src/main/resources/struts.xml	2011-11-24 13:19:36 +0000
+++ dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-dataadmin/src/main/resources/struts.xml	2012-02-04 06:38:16 +0000
@@ -569,5 +569,61 @@
       <param name="requiredAuthorities">F_SCHEDULING_ADMIN</param>
     </action>
 	
+	
+  <!-- OptionSet -->
+  
+   <action name="optionSet" class="org.hisp.dhis.dataadmin.action.option.GetOptionSetListAction">
+     <result name="success" type="velocity">/main.vm</result>
+     <param name="page">/dhis-web-maintenance-dataadmin/optionSet.vm</param>
+     <param name="menu">/dhis-web-maintenance-dataadmin/menu.vm</param>
+     <param name="javascripts">javascript/optionSet.js</param>
+     <param name="requiredAuthorities">F_OPTIONSET_MANAGEMENT</param>
+   </action>
+   
+   <action name="showAddOptionSetForm" class="org.hisp.dhis.dataadmin.action.NoAction">
+     <result name="success" type="velocity">/main.vm</result>
+     <param name="page">/dhis-web-maintenance-dataadmin/addOptionSetForm.vm</param>
+   <param name="javascripts">javascript/optionSet.js</param>
+     <param name="requiredAuthorities">F_OPTIONSET_ADD</param>
+   </action>
+
+   <action name="addOptionSet" class="org.hisp.dhis.dataadmin.action.option.AddOptionSetAction">
+     <result name="success" type="redirect">optionSet.action</result>
+     <param name="requiredAuthorities">F_OPTIONSET_ADD</param>
+   </action>
+   
+   <action name="showUpdateOptionSetForm" class="org.hisp.dhis.dataadmin.action.option.GetOptionSetAction">
+     <result name="success" type="velocity">/main.vm</result>
+     <param name="page">/dhis-web-maintenance-dataadmin/updateOptionSetForm.vm</param>
+   	 <param name="javascripts">javascript/optionSet.js</param>
+     <param name="requiredAuthorities">F_OPTIONSET_UPDATE</param>
+   </action>
+   
+   <action name="updateOptionSet" class="org.hisp.dhis.dataadmin.action.option.UpdateOptionSetAction">
+     <result name="success" type="redirect">optionSet.action</result>
+	 <param name="requiredAuthorities">F_OPTIONSET_UPDATE</param>
+   </action>
+    
+   <action name="removeOptionSet" class="org.hisp.dhis.dataadmin.action.option.RemoveOptionSetAction">
+     <result name="success" type="velocity-json">
+				/dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
+	 <param name="requiredAuthorities">F_OPTIONSET_DELETE</param>
+   </action>
+   
+   <action name="validateOptionSet"
+		class="org.hisp.dhis.dataadmin.action.option.ValidateOptionSetAction">
+		<result name="success" type="velocity-json">
+			/dhis-web-commons/ajax/jsonResponseSuccess.vm</result>
+		<result name="error" type="velocity-json">
+			/dhis-web-commons/ajax/jsonResponseError.vm</result>
+		<param name="onExceptionReturn">plainTextError</param>
+	</action>
+	
+	<action name="getOptionSet"
+		class="org.hisp.dhis.dataadmin.action.option.GetOptionSetAction">
+		<result name="success" type="velocity-json">
+			/dhis-web-maintenance-dataadmin/jsonOptionSet.vm</result>
+	</action>
+   
   </package>
 </struts>

=== modified file 'dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-user/src/main/resources/org/hisp/dhis/user/i18n_module.properties'
--- dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-user/src/main/resources/org/hisp/dhis/user/i18n_module.properties	2012-01-03 06:08:25 +0000
+++ dhis-2/dhis-web/dhis-web-maintenance/dhis-web-maintenance-user/src/main/resources/org/hisp/dhis/user/i18n_module.properties	2012-02-03 15:56:53 +0000
@@ -167,7 +167,10 @@
 F_VALIDATIONCRITERIA_DELETE=Delete Validation Criteria
 F_VALIDATIONCRITERIA_UPDATE=Update Validation Criteria
 F_SEND_MESSAGE=Send message
-F_DV_ADMIN=Administrate Data Visualizer
+F_OPTIONSET_MANAGEMENT=Option Set Management
+F_OPTIONSET_ADD=Add Option Set
+F_OPTIONSET_UPDATE=Update Option Set
+F_OPTIONSET_DELETE=Delete Option Set
 
 #-- User module ---------------------------------------------------------------#
 

