<h3>$i18n.getString( "data_browser" ) #openHelp( "dataBrowser" )</h3> 

<form id="databrowser" metdod="get" action="searchResult.action">
<table>	
	<tr>
		<td>$i18n.getString( "period_type" )</td>
		<td>
			<select id="periodTypeId" name="periodTypeId" style="min-widtd:200px" class="{validate:{required:true}}">
				<option value="">[ $i18n.getString( "select_period_type" ) ]</option>
				#foreach ( $type in $periodTypes )
					<option value="$type.name"#if( $currentPeriodTypeId == $type.name ) selected="selected"#end>$type.name</option>
				#end
			</select>
		</td>
	</tr>  
    <tr>
        <td colspan="2" style="height:10px"></td>
    </tr>
	<tr>
		<td>$i18n.getString( "from_date" )</td>
		<td>
			<input type="text" id="fromDate" name="fromDate" title="Earliest date will be used if no date is selected">			
		</td>		
	</tr>
	 <tr>
        <td colspan="2" style="height:10px"></td>
    </tr>
	<tr>		
		<td>$i18n.getString( "to_date" )</td>
		<td>
			<input type="text" id="toDate" name="toDate" title="Latest date will be used if no date is selected">			
		</td>
	</tr>
	  
    <tr>
        <td colspan="2" style="height:10px"></td>
    </tr>
	</tr>
	<tr>
		<td>$i18n.getString( "browse_by" )</td>
		<td>
			<select id="searchOption" name="searchOption" style="min-widtd:200px" onchange="modeHandler()" class="{validate:{required:true}}">
				<option value ="">[ $i18n.getString( "select_mode" ) ]</option>
				<option value ="DataSet">$i18n.getString( "data_sets" )</option>
				<option value ="DataElementGroup">$i18n.getString( "data_element_groups" )</option>
				<option value ="OrganisationUnitGroup">$i18n.getString( "organisation_unit_groups" )</option>
				<option value ="OrganisationUnit">$i18n.getString( "organisation_units" )</option>
			</select>
		</td>
	</tr>	
</table>

<div id="organisationUnitSection" style="display:none">	
	<table>		
	    <tr>
	        <td style="height:15px; min-widtd:325px;"></td>
	    </tr>
		<tr>
			<td>$i18n.getString( "select_parent_organisation_unit" )</td>
		</tr>
		<tr>
			<td>
				<div style="border:1px dashed gray; height: 16.5em; overflow:auto; padding:0 3px 3px 0;">
				#parse( "/dhis-web-commons/ouwt/orgunittree.vm" )	
				</div>
			</td>
		</tr>
	</table>
</div>

<div id="drillDownCheckBoxDiv" style="display:none">
	<input type="checkbox" id="drillDownCheckBox" name="drillDownCheckBox" /> $i18n.getString( "browse_data_at_this_level" )
</div>

<br/>

<div>
	<input type="submit" value="$i18n.getString( 'browse' )" />
</div>

</form>

<span id="message"></span>

<script type="text/javascript">

	var flag;
	window.onload = modeHandler;
	
	var i18n_drilldown_choose_period_type = '$encoder.jsEscape( $i18n.getString("drilldown_choose_period_type"), "'" )';
	var i18n_drilldown_fromdate_invalid = '$encoder.jsEscape( $i18n.getString("drilldown_fromdate_invalid"), "'" )';
	var i18n_drilldown_enddate_invalid = '$encoder.jsEscape( $i18n.getString("drilldown_enddate_invalid"), "'" )';
	var i18n_drilldown_fromdate_is_later_tdan_todate = '$encoder.jsEscape( $i18n.getString("drilldown_fromdate_is_later_tdan_todate"), "'" )';
	var i18n_drilldown_select_browse_mode = '$encoder.jsEscape( $i18n.getString("drilldown_select_browse_mode"), "'" )';
	
	jQuery(document).ready(function() {
	
		datePickerInRange( 'fromDate' , 'toDate' );
		
		validation( 'databrowser', function( form ){ 			
			form.submit();
		});		
	});
	
</script>