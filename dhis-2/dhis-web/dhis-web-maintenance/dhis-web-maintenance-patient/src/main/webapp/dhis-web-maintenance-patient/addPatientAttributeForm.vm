<script>
//-----------------------------------------------------------------------
//init jQuery validation for addPatientAttributeForm
//-----------------------------------------------------------------------
	jQuery(document).ready(
			function()
			{
				jQuery("#addPatientAttributeForm").validate({
					 meta:"validate"
					,errorElement:"td"
					,submitHandler: function(form)
									{
										if( ATTRIBUTE_OPTION.checkOnSubmit() ) 
										     validateAddPatientAttribute();
									}
				});
				jQuery.validator.loadLocaled( jQuery("#curLocaleCode").val() );
				jQuery("#nameField").focus();
				jQuery("#attributeComboRow").hide();
			}
	);
	var i18n_remove_option = '$encoder.jsEscape( $i18n.getString( "remove_option" ) , "'") ';
</script>
<input type="hidden" id="curLocaleCode" value="$locale.getLanguage()_$locale.getCountry()"/>																		
<h3>$i18n.getString( "add_new_patient_attribute" )</h3>
<form id="addPatientAttributeForm" action="addPatientAttribute.action" method="post" >

<table id="attrTable"> 
    <tr>
        <td width="20em"><label>$i18n.getString( "name" ) <em title="$i18n.getString( "required" )"  class="required">*</em></label></td>
        <td><input type="text" id="nameField" name="nameField"  style="width:20em" class="{validate:{required:true,rangelength:[2,160]}}"></td>
        <td></td>
    </tr>   
    
    <tr>
        <td width="20em" ><label>$i18n.getString( "description" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
        <td><input type="text" id="description" name="description" style="width:20em" class="{validate:{required:true,minlength:2}}"></td>
        <td></td>
    </tr>
    
    <tr>
		<td width="20em"><label for="mandatory">$i18n.getString( "mandatory" )<em title="$i18n.getString( "required" )" class="required">*</em></label></td>
		<td>
			<select id="mandatory" name="mandatory" style="min-width:20em">
				<option value="true" >$i18n.getString( "yes" )</option>
				<option value="false" selected="selected">$i18n.getString( "no" )</option>
			</select>
		</td>		
		<td></td>				
	</tr>
    
    <tr>
        <td width="20em"><label for="valueType">$i18n.getString( "value_type" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
        <td>
            <select id="valueType" name="valueType" style="min-width:20em" onchange="ATTRIBUTE_OPTION.selectValueType(this);">
                <option value="NUMBER" selected="selected">$i18n.getString( "number" )</option>
                <option value="TEXT">$i18n.getString( "text" )</option>
                <option value="YES/NO">$i18n.getString( "yes_no" )</option>
                <option value="DATE">$i18n.getString( "date" )</option>
                <option value="COMBO">$i18n.getString( "attribute_combo_type" )</option>
            </select>
        </td>
        <td></td>
    </tr>  
    <tr id="attributeComboRow"> 
    	<td width="20em"><label>$i18n.getString( "attribute_options" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
    	<td ><table id="attrOptionContainer"></table><a href="#" style="text-decoration: none;margin-top: 0.5em"  onclick="ATTRIBUTE_OPTION.addOption()">[ $i18n.getString( "add_more_option" ) ]</a></td>
    	<td></td>
    </tr>
    
</table>

<p>
    <input type="submit" value="$i18n.getString( "add" )" style="width:10em">
    <input type="button" value="$i18n.getString( "cancel" )" onclick="window.location.href='patientAttribute.action'" style="width:10em">
</p>

</form>    
<span id="message"></span>
