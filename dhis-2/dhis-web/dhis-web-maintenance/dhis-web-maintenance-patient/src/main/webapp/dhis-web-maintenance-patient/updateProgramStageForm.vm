
<h3>$i18n.getString( "update_program_stage" )</h3>

<form id="updateProgramStageForm" name="updateProgramStageForm" action="updateProgramStage.action" method="post" onsubmit="submitForm(this); return validateUpdateProgramStage()">

<div style="display:inline">
  <input type="hidden" id="id" name="id" value="$programStage.id">
</div>
  
  <table id="detailsList">
    <thead>
      <tr>
        <th colspan="2">$i18n.getString( "program_stage_details" )</th>
      </tr>
    </thead>
    <tbody>
      <tr>
		<td><label>$i18n.getString( "name" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
		<td><input type="text" id="nameField" name="nameField" value="$encoder.htmlEncode( $programStage.name )" style="width:30em"></td>
	  </tr>
	  	  
      <tr>
		<td><label>$i18n.getString( "description" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
		<td><input type="text" id="description" name="description" value="$encoder.htmlEncode( $programStage.description )" style="width:30em"></td>
	  </tr>  
	  
	  <tr>
        <td><label>$i18n.getString( "min_days_from_start" )</label></td>
        <td><input type="text" id="minDaysFromStart" name="minDaysFromStart" maxlength="30" value="$encoder.htmlEncode( $programStage.minDaysFromStart )" style="width:30em"></td>
      </tr> 
      
      <tr>
        <td><label>$i18n.getString( "program" )</label></td>
        <td><input type="text" id="program" name="program" maxlength="30" value="$encoder.htmlEncode( $programStage.program.name )" style="width:30em" disabled="disabled">
      </tr>     
         
      <tr><td>&nbsp;</td><td>&nbsp;</td></tr>       
      
    </tbody>
  </table>

  <table id="programStageMembersArea">
    
    <thead>
      <tr>        
        <th>$i18n.getString( "available_data_elements" )</th>
        <th></th>
        <th>$i18n.getString( "selected_data_elements" )</th>
      </tr>
    </thead>
  
    <tbody>
      <tr>
     	<td>
            <select size="15" id="availableList" name="availableList" multiple="multiple" style="min-width:20em;height:20em" ondblclick="moveFromAvailableList()">
                #foreach ( $dataElement in $dataElements )
                    <option value="$dataElement.id">$encoder.htmlEncode( $dataElement.name )</option>
                #end              
            </select>
        </td>
        <td valign="top" align="center">            
             <input type="button" value="&gt;" onclick="moveFromAvailableList()"><br>    
             <input type="button" value="&lt;" onclick="moveItemsFromSelectedList()"><br><br> 
        <td>
            <div style="overflow:auto; height:20em; width:20em">    
	            <ul id="selectedList" style="list-style:none">
	             #foreach ( $programStageDataElement in $programStageDataElements )
                    <li onClick="selectItem(this)" ondblclick="moveFromSelectedList(this)"><input type="checkbox" value="$programStageDataElement.dataElement.id" #if($programStageDataElement.compulsory) checked="checked" #end>$programStageDataElement.dataElement.name</li>
               	 #end
	            </ul>
	            <input type="hidden" id="selectedListSubmit" name="selectedList"/>
         	</div>
        </td>
        
      </tr>
      
    </tbody>
  </table>

<p>
	<input type="submit" value="$i18n.getString( "update" )" style="width:10em">
	<input type="button" value="$i18n.getString( "cancel" )" onclick="window.location.href='programStage.action'" style="width:10em">
</p>

</form> 	

<span id="message"></span>

<script type="text/javascript">     
    var i18n_invalid_min_max_days = '$encoder.jsEscape( $i18n.getString( "invalid_min_max_days" ) , "'")';
    var i18n_value_must_positive = '$encoder.jsEscape( $i18n.getString( "value_must_positive" ) , "'")';
    var i18n_value_must_integer = '$encoder.jsEscape( $i18n.getString( "value_must_integer" ) , "'")';
    var i18n_compulsory_checkbox_title = '$encoder.jsEscape( $i18n.getString( "compulsory_checkbox_title" ) , "'")';      
</script>
