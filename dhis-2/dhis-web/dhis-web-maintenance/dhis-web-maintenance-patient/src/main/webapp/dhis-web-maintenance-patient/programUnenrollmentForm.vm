
<script>
	//-----------------------------------------------------------------------
	//init jQuery validation for programEnrollmentForm
	//-----------------------------------------------------------------------
	jQuery(document).ready(
			function()
			{
				jQuery("#programUnenrollmentForm").validate({
					 meta:"validate"
					,errorElement:"td"
					,submitHandler: function(form)
									{
										validateProgramEnrollment();
									}
				});

                datePickerValid( 'enrollmentDate' );
                datePickerValid( 'dateOfIncident' );
			}
	);

</script>

<form id="programEnrollmentForm" name="programEnrollmentForm" method="post" action='showProgramUnEnrollmentForm.action'>

#parse( "/dhis-web-maintenance-patient/programUnenrollmentSelectForm.vm" )

<table width="100%">
    <tr>
        <td style="width:180px"><label for="enrollmentDate" #if($selectedProgram) title="$!selectedProgram.dateOfEnrollmentDescription" #end>$i18n.getString( "date_of_enrollment" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
        <td><input type="text" id="enrollmentDate" name="enrollmentDate" #if( $programInstance ) value="$!format.formatDate( $programInstance.enrollmentDate )" #end> <i>( $!selectedProgram.dateOfEnrollmentDescription )</i></td>
    </tr>
    
    <tr>
        <td style="width:180px"><label for="dateOfIncident" #if($selectedProgram) title="$!selectedProgram.dateOfIncidentDescription" #end>$i18n.getString( "date_of_incident" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
        <td><input type="text" id="dateOfIncident" name="dateOfIncident" #if( $programInstance ) value="$!format.formatDate( $programInstance.dateOfIncident )" #end><i>( $!selectedProgram.dateOfIncidentDescription )</i></td>
    </tr>
	<tr>
        <td></td>
        <td></td>                           
    </tr>

#if($!programInstance.enrollmentDate) 
	<tr>
		<td colspan='2'><hr/></td>	
	<tr>
	#foreach($attribute in $programAttributes)
	<tr>
        <td>$attribute.name</td>
		<td class="input-column">
			#if( $attribute.valueType == "YES/NO" )
				<select id="attr$attribute.id"  name="attr$attribute.id" style="width:100"> 
					<option value="">[$i18n.getString( "please_select" )]</option>
					<option value="true">$i18n.getString( "yes" )</option>
					<option value="false" selected="selected">$i18n.getString( "no" )</option>
				</select>                
			#elseif( $attribute.valueType == "DATE" )
				<input type="text" id="attr$attribute.id"  name="attr$attribute.id">
				<script type="text/javascript">
					datePickerValid( 'attr$attribute.id' );
				</script>                    
			#elseif( $attribute.valueType == "COMBO" )
				<select  id="attr$attribute.id"  name="attr$attribute.id">
					<option value="">[$i18n.getString( "please_select" )]</option>
					#foreach ($option in $attribute.attributeOptions )
						<option value="$option.id" >$option.name</option>
					#end
				</select>
			#else 
				<input type="text"  id="attr$attribute.id"  name="attr$attribute.id">
			#end
			
			#if($!programAttribute.description) <i>($!programAttribute.description)</i> #end
		</td>		
    </tr>
	#end
	<tr>
        <td></td>
        <td></td>                            
    </tr>
	
</table>
#end

<table>
	<tr>
		<td style="width:180px">
			<input type="button" value='$i18n.getString( "unenroll" )' onclick="javascript: removeEnrollment();" #if( $!programInstance.enrollmentDate ) #else disabled #end>
		</td>                                        
	</tr>
</table>

</form>

<span id="message"></span>

<script type="text/javascript">    
    var i18n_program_enrollment_failed = '$encoder.jsEscape( $i18n.getString( "program_enrollment_failed" ) , "'")';
    var i18n_saving_value_failed_status_code = '$encoder.jsEscape( $i18n.getString( "saving_value_failed_status_code" ) , "'")';
    var i18n_saving_value_failed_error_code = '$encoder.jsEscape( $i18n.getString( "saving_value_failed_error_code" ) , "'")';
    var i18n_searching_patient_failed = '$encoder.jsEscape( $i18n.getString( "searching_patient_failed" ) , "'")'; 
	var i18n_due_date_invalid = '$encoder.jsEscape( $i18n.getString( "due_date_invalid" ) , "'")';
</script>
