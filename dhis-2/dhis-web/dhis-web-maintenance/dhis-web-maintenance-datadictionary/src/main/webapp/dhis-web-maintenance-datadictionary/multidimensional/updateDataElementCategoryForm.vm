<script>
//-----------------------------------------------------------------------
//init jQuery validation for editDataElementCategoryForm
//-----------------------------------------------------------------------
	jQuery(document).ready(
			function()
			{
				jQuery("#editDataElementCategoryForm").validate({
					 meta:"validate"
					,errorElement:"td"
					,submitHandler: function(form)
									{
										validateEditDataElementCategory();
									}
				});
				jQuery.validator.setMessages( validationMessage );
			}
	);

</script>
<input type="hidden" id="curLocaleCode" value="$locale.getLanguage()_$locale.getCountry()"/>
<h3>$i18n.getString( "edit_data_element_category" )</h3>

<form id="editDataElementCategoryForm" name="editDataElementCategoryForm" action="updateDataElementCategory.action" method="post">
  
  <input type="hidden" id="id" name="id" value="$dataElementCategory.id">
  
  <table>
    <tr>
      <th colspan="2">$i18n.getString( "details" )</th>
      <td></td>
    </tr>
    <tr>
      <td><label>$i18n.getString( "name" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
      <td><input type="text" id="name" name="name" value="$!encoder.htmlEncode( $dataElementCategory.name )" style="width:25em" maxlength="160" class="{validate:{required:true,minlength:2,maxlength:160}}"></td>
      <td></td>
    </tr>      
    <tr>
      <td><label>$i18n.getString( "concept_name" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
      <td><input type="text" id="conceptName" name="conceptName" value="$!encoder.htmlEncode( $dataElementCategory.conceptName )" style="width:25em" maxlength="10" class="{validate:{minlength:2,maxlength:10}}"></td>
      <td></td>
    </tr>  
    <tr>
      <td colspan="3" style="height:15px"></td>
    </tr>
    <tr>
      <th colspan="2">$i18n.getString( "category_options" )</th>
      <td></td>
    </tr>
	<tr>
	  <td><label>$i18n.getString( "selected_name" )</label></td>
	  <td><input type="text" id="categoryOptionName" style="width:25em"></td>
	  <td></td>
	</tr>
	 <tr>
      <td></td>
      <td colspan="2">
      	<input type="button" value="$i18n.getString( "edit_category_option" )" onclick="validateAddCategoryOption();" style="width:200px">
      </td>
    </tr>
    <tr>
      <td></td>
      <td>
        <select multiple size="10" id="categoryOptions" name="categoryOptions" style="width:300px" onchange='showName();'>
        #foreach( $categoryOption in $dataElementCategory.categoryOptions )
        	<option value="$categoryOption.id">$encoder.htmlEncode( $categoryOption.name )</option>
        #end
        </select>   
      </td>
      <td style="width:30px; text-align:center">
        <a href="javascript:moveUpSelectedOption( 'categoryOptions' )"><img src="../images/move_up.png"></a><br><br>
        <a href="javascript:moveDownSelectedOption( 'categoryOptions' )"><img src="../images/move_down.png"></a><br><br>
      </td>
    </tr>
    <tr>
      <td colspan="3" style="height:15px"></td>
    </tr>
    <tr>
      <td></td>
      <td colspan="2">
        <input type="submit" value="$i18n.getString( "save" )" style="width:100px"><input 
               type="button" onclick="window.location.href='category.action'" value="$i18n.getString( "cancel" )" style="width:100px"></p>
      </td>
    </tr>
  </table>
</form>

<span id="message"></span>

<script type="text/javascript">
    var i18n_specify_category_option_name = '$encoder.jsEscape( $i18n.getString( "specify_category_option_name" ) , "'")';
    var i18n_category_option_name_already_exists = '$encoder.jsEscape( $i18n.getString( "category_option_name_already_exists" ) , "'")';
	var i18n_option_rename_successfully = '$encoder.jsEscape( $i18n.getString( "option_rename_successfully" ) , "'")';
	var mode = 'update';
	
	function showName(){
		var categoryOptions = byId('categoryOptions');
		byId('categoryOptionName').value=categoryOptions[categoryOptions.selectedIndex].text;
	}
</script>
