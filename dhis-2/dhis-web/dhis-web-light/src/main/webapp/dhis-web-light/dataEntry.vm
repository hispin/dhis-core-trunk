
<h2>$dataSet.name</h2>

<form action="saveSectionForm.action" method="POST">

<input type="hidden" id="organisationUnitId" name="organisationUnitId" value="$organisationUnitId" />
<input type="hidden" id="dataSetId" name="dataSetId" value="$dataSetId" />
<input type="hidden" id="periodId" name="periodId" value="$periodId" />
<input type="hidden" id="validated" name="validated" value="#if($validated)true#{else}false#end" />

#macro( createSection $sectionName $dataElements )
<div class="header-box" align="center">
	<h3 style="text-align: left;">$sectionName</h3>
	<p style="text-align: left;">
		#foreach( $dataElement in $dataElements)
			#foreach( $optionCombo in $dataElement.categoryCombo.optionCombos )
				#set( $key = "DE${dataElement.id}OC${optionCombo.id}" )
				<label>$dataElement.name $optionCombo.name</label>

				#if( $validationErrors.get( $key ) )
				#set( $validationError = $validationErrors.get( $key ) ) 
				<br /><span style="color: red;">Value is out of bounds [ $validationError.min, $validationError.max ]</span>
				#end

				<input type="number" size="24" name="$key" value="$!dataValues.get($key)" /> <br />
			#end
		#end
	</p>
</div>
#end

#if( $dataSet.sections.size() > 0 )
#foreach( $section in $dataSet.sections )
	#createSection( $section.name $section.dataElements )
#end
#else
	#createSection( "Default" $dataSet.dataElements )
#end

<div class="header-box" align="center">
	<p style="text-align: left;">
		<input type="checkbox" id="complete" name="complete" value="true" #if($complete)checked="true"#end style="width: 15px; height: 15px; vertical-align: middle;" />
        <label for="complete" style="vertical-align: middle; width: auto;">DataSet is complete</label>
	</p>
</div>

<div class="header-box" align="center">
	<p>
		<input type="submit" style="width: 100%;" value="Save"/>
	</p>
</div>

</form>
