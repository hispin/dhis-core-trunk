<div class="panel panel-default" ng-controller="NotesController">
    <div class="panel-heading">
        {{notesWidget.title| translate}}
        <span class="nav-pills" ng-show="selectedEnrollment.notes.length > 5">
            | <a href ng-click="searchNote()" title="{{'search_note'| translate}}">{{'search'| translate}}</a>
        </span>
        <span class="nav-pills" ng-show="selectedEnrollment">
            | <span><a href ng-click="showAddNote()" title="{{'add_note'| translate}}">{{'add'| translate}}</a></span>            
        </span>
        <span class="pull-right">
            <a class="small-horizonal-spacing" href ng-click="expandCollapse(notesWidget)">
                <span ng-show="notesWidget.expand" class='black'><i class="fa fa-chevron-up" title="{{'collapse'| translate}}"></i></span>
                <span ng-show="!notesWidget.expand" class='black'><i class="fa fa-chevron-down" title="{{'expand'| translate}}"></i></span>
            </a>
            <a class="small-horizonal-spacing" href ng-click="removeWidget(notesWidget)" title="{{'remove'| translate}}"><span class='black'><i class="fa fa-times-circle"></i></span></a>            
        </span>        
    </div>
    <div ng-show="notesWidget.expand" class="panel-body dashboard-widget-container">
        

            <div ng-show="searchNoteField">
                <div class="list-group">
                    <input class="form-control" ng-model="noteSearchText" ng-blur="searchNote()" placeholder="{{'search'| translate}}">            
                </div>
            </div>
            <div ng-show="addNoteField">
                <div class="list-group">
                    <textarea class="form-control" rows="3" ng-model="note" placeholder="{{'add_your_note_here'| translate}}"></textarea>                          
                </div>

                <div class='vertical-spacing'>
                    <button type="button" 
                            class="btn btn-default small-horizonal-spacing"
                            ng-click="addNote()">
                        {{'save'| translate}}
                    </button>        
                    <button type="button" 
                            class="btn btn-default small-horizonal-spacing" 
                            ng-click="closeAddNote()">
                        {{'cancel'| translate}}
                    </button>
                </div>
            </div>

        
        <div ng-show='selectedEnrollment' class='vertical-spacing remove-default-padding'>

            <table class="table table-with-fixed-layout">
                <tr ng-repeat="note in selectedEnrollment.notes| filter:noteSearchText">
                    <td class="over-flow-hidden">
                        <d2-pop-over content="note" template="note.html" details="{{'details'| translate}}">
                            <div class="pop-over">{{note.value}}</div>
                        </d2-pop-over>
                        <script type="text/ng-template" id="note.html">
                            <p>{{content.value}}</p>
                            <hr>
                            <p><strong>{{'created_by' | translate}}: </strong>{{content.storedBy}}</p>
                            <p><strong>{{'date' | translate}}: </strong>{{content.storedDate}}</p>                           
                        </script>
                    </td> 
                </tr>
            </table>
        </div>

        <div ng-show="!selectedEnrollment">
            <div class="alert alert-warning">{{'not_yet_enrolled_note'| translate}}</div> 
        </div>
        <div ng-show="selectedEnrollment && !selectedEnrollment.notes">
            <div class="alert alert-info">{{'empty_notes'| translate}}</div> 
        </div>

    </div>
</div>