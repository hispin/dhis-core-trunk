<div class="bordered-div col-md-12" ng-controller="RegistrationController">
    <form name="outerForm" novalidate>        
        <div class="row col-sm-12 vertical-spacing" ng-if="selectedProgram && selectedProgram.displayCustomForm">
            <div ng-if="!customForm.hasProgramDate">
                <table>
                    <table class="dhis2-list-table-striped dhis2-table-hover">
                        <tr>
                            <td>
                                {{selectedProgram.dateOfEnrollmentDescription}}
                            </td>
                            <td>
                                <input type="text" 
                                       placeholder="{{dhis2CalendarFormat.keyDateFormat}}" 
                                       name="dateOfEnrollment" 
                                       class="form-control" 
                                       d2-date 
                                       ng-model="enrollment.dateOfEnrollment" 
                                       max-date="selectedProgram.selectEnrollmentDatesInFuture ? '' : 0"
                                       min-date=""
                                       ng-required="true"/>
                                <span ng-show="outerForm.submitted && outerForm.dateOfEnrollment.$invalid" class="error">{{'required'| translate}}</span>
                            </td>
                        </tr>     
                        <tr ng-if="selectedProgram.displayIncidentDate">
                            <td>
                                {{selectedProgram.dateOfIncidentDescription}}
                            </td>
                            <td>
                                <input type="text" 
                                       placeholder="{{dhis2CalendarFormat.keyDateFormat}}"
                                       name="dateOfIncident"
                                       class="form-control" 
                                       d2-date 
                                       max-date="selectedProgram.selectIncidentDatesInFuture ? '' : 0"
                                       min-date=""
                                       ng-model="enrollment.dateOfIncident"/>
                            </td>
                        </tr>
                    </table>
            </div>
            <div ng-include="'../dhis-web-commons/customform/custom-form.html'"></div>
        </div>
        <div class="row col-sm-12 vertical-spacing" ng-if="!selectedProgram.displayCustomForm">            
            <div ng-include="'components/registration/default-form.html'"></div>
        </div>

        <div ng-if="formEmpty && outerForm.submitted">
            <div class="alert alert-warning">{{'form_is_empty_fill_at_least_one'| translate}}</div> 
        </div>

        <div class="vertical-spacing">                
            <button type="button" class="btn btn-primary" ng-click="registerEntity('DASHBOARD')">{{'save_and_continue'| translate}}</button>
            <button type="button" class="btn btn-success small-horizonal-spacing" ng-click="registerEntity('SELF')">{{'save_and_add_new'| translate}}</button>
            <button type="button" class="btn btn-default small-horizonal-spacing" ng-click="showRegistration()">{{'cancel'| translate}}</button>
        </div>
    </form>
</div>