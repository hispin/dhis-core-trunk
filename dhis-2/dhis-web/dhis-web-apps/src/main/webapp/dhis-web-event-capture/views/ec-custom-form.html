<table style='width: 50%;'>
    <tr ng-if="selectedProgramStage.preGenerateUID">
        <td>
            {{'form_id'| translate}}
        </td>
        <td>
            <input type="text" ng-disabled="true" ng-model="currentEvent['uid']" style="width:99%;">
        </td>
    </tr>
    <tr ng-if="!customForm.hasEventDate">
        <td>
            {{selectedProgramStage.reportDateDescription ? selectedProgramStage.reportDateDescription : 'incident_date'| translate }}
        </td>
        <td>
            <input type="text"                                                   
                    placeholder="{{dhis2CalendarFormat.keyDateFormat}}"
                    d2-date
                    max-date='0'
                    ng-model="currentEvent.eventDate"
                    ng-disabled="editingEventInFull"    
                    ng-required="true" 
                    
                    d2-date-validator
                    name="eventDate" 
                    input-field-id='eventDate' 
                    style="width:99%;">
            <div ng-messages="outerForm.eventDate.$error" ng-if="interacted(outerForm.eventDate)" class="required" ng-messages-include="../dhis-web-commons/angular-forms/error-messages.html">                                         
            </div>
        </td>
    </tr>
    <tr ng-if="selectedProgramStage.captureCoordinates">
        <td>
            {{'latitude'| translate}}<span class="pull-right"><a href ng-click="showMap(currentEvent)" title="{{'get_from_map'| translate}}"><i class="fa fa-map-marker fa-2x"></i></a></span>
        <td>
            <input type="number" 
                   ng-model="currentEvent.coordinate.latitude"   
                   
                   name="latitude"
                   d2-coordinate-validator
                   ng-required="false"
                   style="width:99%;"/>
            <div ng-messages="outerForm.latitude.$error" ng-if="interacted(outerForm.latitude)" class="required" ng-messages-include="../dhis-web-commons/angular-forms/error-messages.html">                        
            </div>
        </td>                                            
    </tr>
    <tr ng-if="selectedProgramStage.captureCoordinates">
        <td>
            {{'longitude'| translate}}<span class="pull-right"><a href ng-click="showMap(currentEvent)" title="{{'get_from_map'| translate}}"><i class="fa fa-map-marker fa-2x"></i></a></span>
        </td>
        <td>
            <input type="number" 
                   ng-model="currentEvent.coordinate.longitude"   
                   
                   name="longitude" 
                   d2-coordinate-validator
                   ng-required="false"
                   style="width:99%;"/>
            <div ng-messages="outerForm.longitude.$error" ng-if="interacted(outerForm.longitude)" class="required" ng-messages-include="../dhis-web-commons/angular-forms/error-messages.html">
            </div>
        </td>                                                            
    </tr>
</table>
<div ng-include="'../dhis-web-commons/angular-forms/custom-form.html'"></div>

<div class="clear">
    <hr>
    <h4>
        {{'comments'| translate}}
    </h4>
    <textarea rows="3" ng-model="note.value" placeholder="{{'add_your_comment_here'| translate}}" style="width:50%;"></textarea>
    <div ng-if="currentEvent.notes">
        <table class="listTable dhis2-list-table-striped" style='width: 50%;'>
            <thead>
                <tr>
                    <th style="width:100%;">
                        {{'recorded_comments'| translate}}
                    </th>
                </tr>
            </thead>
            <tr ng-repeat="note in currentEvent.notes">
                <td class="over-flow-hidden" style="width:100%;">
                    <p>{{note.value}}</p>
                    <p><strong>{{'created_by'| translate}}: </strong>{{note.storedBy}}</p>
                    <p><strong>{{'date'| translate}}: </strong>{{note.storedDate}}</p>                    
                </td>
            </tr>
        </table>  
    </div>    
</div>

<!-- buttons for event registration / update begins -->
<div style="clear: both;">                        
    <span ng-if="editingEventInFull">
        <button type="button" ng-click="updateEvent()" class="button hideInPrint">{{'update'| translate}}</button>
        <button type="button" ng-click="cancel()" class="button hideInPrint">{{'cancel'| translate}}</button>
    </span>
    <span ng-if="eventRegistration">
        <button type="button" ng-disabled="disableSaveAndAddNew" ng-click="addEvent(true)" class="button hideInPrint">{{'save_and_add_new'| translate}}</button>
        <button type="button" ng-click="addEvent()" class="button hideInPrint">{{'save_and_back'| translate}}</button>
        <button type="button" ng-click="cancel()" class="button hideInPrint">{{'cancel'| translate}}</button>
    </span>
    <br><span ng-if="isFormInvalid()" class="horizontal-spacing red">{{'form_invalid' | translate}}</span>
</div>
<!-- buttons for event registration / update ends -->