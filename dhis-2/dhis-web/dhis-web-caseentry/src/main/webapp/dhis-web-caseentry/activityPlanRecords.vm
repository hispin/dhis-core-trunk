<script src="javascript/tooltip.js" type="text/javascript"></script>
<table>
	<tr>
		<td class='text-column'>$i18n.getString( "total_result" ):</td>
		<td>&nbsp;</td>
		<td>&nbsp;</td>
		<td>$!total</td>
	</tr>
</table>

#if( $programStageInstances && $programStageInstances.size()>0 )
<div class='visit-schedule' height='100%'>
	<table class='listTable'>
		<col/>
		<col/>
		<col width='30%'/>
		#set( $programStage = '' )
		#foreach( $programStageInstance in $programStageInstances )
			#set( $eventName = $programStageInstance.programStage.displayName )
			#set( $patient = $programStageInstance.programInstance.patient)
			#if( $eventName != $programStage)
				<tr><td colspan='3' class='bold'>$i18n.getString('for') $eventName</td></tr>
				<tr>
					<th>#</th>
					<th>$i18n.getString('full_name')</th>
					<th>$i18n.getString( "gender" )</th>
					<th>$i18n.getString( "date_of_birth" )</th> 
					<th>$i18n.getString( "age" )</th>
					<th>$i18n.getString( "phone_number" )</th>
					<th>$i18n.getString('date_scheduled')</th>
				#set( $mark = false ) 
				#set( $nr = 0 ) 
				#set( $programStage = $eventName )
			#end
			<tr #alternate( $mark )>
				<td>
					#set( $nr = $nr + 1 )
					$nr
				</td>
				<td>$patient.getFullName()</td>
				<td>$i18n.getString($!patient.gender)</td>
				
				<td>$format.formatDate( $!patient.birthDate)</td>
				
				<td>$!patient.getAge()</td>
				
				<td>$!patient.phoneNumber</td>
				
				<td><a href="javascript:loadDataEntry( $programStageInstance.id );">
					#if($!programStageInstance.executionDate)
						$format.formatDate($!programStageInstance.executionDate)
					#else
						$format.formatDate($!programStageInstance.dueDate)
					#end
					</a>
				</td>
			</tr>
			#set( $mark = !$mark )
		#end
	
	<div class="paging-container">
		#parse( "/dhis-web-commons/paging/paging.vm" )
	</div>
</div>

<div id="detailsInfo"></div>

#end
