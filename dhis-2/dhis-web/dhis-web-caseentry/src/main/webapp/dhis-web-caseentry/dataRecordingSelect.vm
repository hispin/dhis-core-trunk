<div>
    <input type="button" value="$i18n.getString( 'back_to_search' )" onclick="javascript:showSearchForm();" style="width:10em">
</div>
   
<table class="mainPageTable"> 
    <tr>            
        <td>
            <strong>$i18n.getString( "full_name" ):</strong>$encoder.htmlEncode( $patient.getFullName() )<br>
            <strong>$i18n.getString( "gender" ):</strong>$encoder.htmlEncode( $patient.gender )<br>
            <strong>$i18n.getString( "date_of_birth" ):</strong>$format.formatDate( $patient.birthDate )<br>
            <strong>$i18n.getString( "age" ):</strong>$encoder.htmlEncode( $patient.getAge() )
        </td>
        <td style="vertical-align:top">
			<div id="currentSelection" style="float:right"></div>
        </td>
    </tr>                    
</table>

<hr style="clear:both">

<table width='100%'> 
   <tr>
        <td><label for="programId">$i18n.getString( "program" )</label></td>
        <td>
            <select id="programId" name="programId" style="min-width:350px" onchange="loadProgramStages();" #if( $programs.size() == 0 ) disabled="disabled" #end>
                <option value="0">[$i18n.getString( "select" )]</option>
                #foreach( $program in $programs )
                    <option value="$program.id" #if( $programId && $program.id == $programId ) selected="selected" #end>$encoder.htmlEncode( $program.name )</option>
                #end
            </select>
        </td>
		<td><label for="dueDate">$i18n.getString( "due_date" ) </label></td>
        <td><input type="text" id="dueDate" name="dueDate" value="$!format.formatDate( $programStageInstance.dueDate )" readonly </td>
    </tr>
    
    <tr>
        <td><label for="programStageId">$i18n.getString( "program_stage" )</label></td>
        <td>
            <select id="programStageId" name="programStageId" style="min-width:350px" onchange="javascript:loadDataEntry();" >
            </select>
        </td>
		<td><label for="executionDate">$i18n.getString( "report_date" ) </label></td>
		<td><input type="text" id="executionDate" name="executionDate" value="$!format.formatDate( $programStageInstance.executionDate )" onchange="saveExecutionDate( $programStageInstance.id, '$encoder.jsEncode( $programStageInstance.programStage.name )' )" >
			<script type="text/javascript">
			   datePickerValid( 'executionDate', false );
			</script>  
    </tr>
	
	<tr>
		<td></td>
		<td>
			<input type="button" id="completeBtn" value="$i18n.getString('complete')" onClick="doComplete()" style="width:12em" disabled="disabled" >
			<input type="button" id="validationBtn" value="$i18n.getString('validation')" onClick="javascript: runValidation();", '_blank', 'width=800, height=400, scrollbars=yes, resizable=yes' );" style="width:12em " disabled="disabled" >
		</td>
		<td align='right'>
			<input type="checkbox" id="useDefaultForm" name="useDefaultForm" value="true" onclick="loadDataEntry();" />
			<label>$i18n.getString( "use_default_form" )</label><br>	
		</td>
		</td>
	</tr>
</table>
