<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">

  <!-- Content providers -->
  
  <bean id="rssHealthContentProvider" 
    class="org.hisp.dhis.dashboard.provider.RssContentProvider">
    <property name="url" value="http://health.yahoo.com/news/rss/health"/>
    <property name="key" value="healthItems"/>
  </bean>
  
  <bean id="rssHivAidsContentProvider" 
    class="org.hisp.dhis.dashboard.provider.RssContentProvider">
    <property name="url" value="http://health.yahoo.com/news/rss/hiv_aids"/>
    <property name="key" value="hivAidsItems"/>
  </bean>
  
  <bean id="reportContentProvider" 
    class="org.hisp.dhis.dashboard.provider.ReportContentProvider">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="userStore" ref="org.hisp.dhis.user.UserStore"/>
    <property name="reportManager" ref="org.hisp.dhis.report.ReportManager"/>
    <property name="key" value="reports"/>
  </bean>
  
  <bean id="dataMartExportContentProvider"
    class="org.hisp.dhis.dashboard.provider.DataMartExportContentProvider">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="userStore" ref="org.hisp.dhis.user.UserStore"/>
    <property name="key" value="dataMartExports"/>
  </bean>
  
  <bean id="olapUrlContentProvider"
    class="org.hisp.dhis.dashboard.provider.OlapUrlContentProvider">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="userStore" ref="org.hisp.dhis.user.UserStore"/>
    <property name="key" value="olapUrls"/>
  </bean>
    
  <!-- Manager -->
  
  <bean id="org.hisp.dhis.dashboard.manager.DashboardManager" 
    class="org.hisp.dhis.dashboard.manager.DefaultDashboardManager">
    <property name="userSettingService" ref="org.hisp.dhis.user.UserSettingService"/>
    <property name="contentProviders">
      <map>        
        <entry>
          <key><value>report</value></key>
          <ref local="reportContentProvider"/>
        </entry>
        <entry>
          <key><value>data_mart_export</value></key>
          <ref local="dataMartExportContentProvider"/>
        </entry>
        <entry>
          <key><value>olap_url</value></key>
          <ref local="olapUrlContentProvider"/>
        </entry>
        <entry>
          <key><value>rss_health</value></key>
          <ref local="rssHealthContentProvider"/>
        </entry>
        <entry>
          <key><value>rss_hiv_aids</value></key>
          <ref local="rssHivAidsContentProvider"/>
        </entry>
      </map>
    </property>
  </bean>
  
  <!-- Actions -->
  
  <bean id="org.hisp.dhis.dashboard.action.ProvideContentAction"
    class="org.hisp.dhis.dashboard.action.ProvideContentAction"
    scope="prototype">
    <property name="manager" ref="org.hisp.dhis.dashboard.manager.DashboardManager"/>
    <property name="chartService" ref="org.hisp.dhis.chart.ChartService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.SetAreaItemAction"
    class="org.hisp.dhis.dashboard.action.SetAreaItemAction"
    scope="prototype">
    <property name="manager" ref="org.hisp.dhis.dashboard.manager.DashboardManager"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.ClearAreaAction"
    class="org.hisp.dhis.dashboard.action.ClearAreaAction"
    scope="prototype">
    <property name="manager" ref="org.hisp.dhis.dashboard.manager.DashboardManager"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.GetChartAction"
    class="org.hisp.dhis.dashboard.action.GetChartAction"
    scope="prototype">
    <property name="chartService" ref="org.hisp.dhis.chart.ChartService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.RemoveReportAction"
    class="org.hisp.dhis.dashboard.action.RemoveReportAction"
    scope="prototype">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="userStore" ref="org.hisp.dhis.user.UserStore"/>
    <property name="reportStore" ref="org.hisp.dhis.report.ReportStore"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.RemoveDataMartExportAction"
    class="org.hisp.dhis.dashboard.action.RemoveDataMartExportAction"
    scope="prototype">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="userStore" ref="org.hisp.dhis.user.UserStore"/>
    <property name="dataMartExportService" ref="org.hisp.dhis.datamart.DataMartExportService"/>
  </bean>
  
  <bean id="org.hisp.dhis.dashboard.action.RemoveOlapUrlAction"
    class="org.hisp.dhis.dashboard.action.RemoveOlapUrlAction"
    scope="prototype">
    <property name="currentUserService" ref="org.hisp.dhis.user.CurrentUserService"/>
    <property name="userStore" ref="org.hisp.dhis.user.UserStore"/>
    <property name="olapURLService" ref="org.hisp.dhis.olap.OlapURLService"/>
  </bean>
  
</beans>
