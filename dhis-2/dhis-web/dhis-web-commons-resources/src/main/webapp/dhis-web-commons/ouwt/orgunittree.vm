<script>
	
$(document).ready(function(){
	$("#searchIcon").click(function(){
		$("#searchSpan").toggle();
		$("#searchField").focus();
		byId('visited').value = ( byId('visited').value==0 ) ? 1 : 0 ;
	});
	
});

</script>

<input type='hidden' id='visited' name='visited' value='0'>
<img id="searchIcon" src="../images/search.png" style="cursor: pointer" title="$i18n.getString( 'locate_organisation_unit_by_code' )">
<span id="searchSpan" style="display:none"><input type="text" id="searchField" name="key" style="width:130px" onchange="getOrgunitByCode();"><input type="button" value="Find" onclick="getOrgunitByCode()"></span>

#macro( parseNode $node )
	#if( $node.hasChildren )
		#if( $node.children )
			#set( $toggle = '<img src="../images/expand.png" width="9" height="9" alt="[-]">' )
		#else
			#set( $toggle = '<img src="../images/colapse.png" width="9" height="9" alt="[+]">' )
		#end
	#else
		#set( $toggle = '<img src="../images/transparent.gif" width="9" height="9" alt="">' )
	#end
	#if( $node.selected )
		#set( $selected = 'class="selected" ' )
	#else
		#set( $selected = '' )
	#end
	<li id="orgUnit${node.id}">
		<span class="toggle" #if( $node.hasChildren ) onclick="subtree.toggle(${node.id})" #end>$toggle</span>
		<a ${selected}href="javascript:void selection.select(${node.id})">$encoder.htmlEncode( $node.name )</a>
		#if( $node.children )
			<ul>
			#foreach( $child in $node.children )
				#parseNode( $child )
			#end
			</ul>
		#end
	</li>
#end

#if( $organisationUnitTree )
	<div id="orgUnitTree">
		<ul>
			#foreach( $root in $organisationUnitTree )
				#parseNode( $root )
			#end
		</ul>
	</div>
#end

<script>
	
	var visited = byId('visited').value;
	if(visited == 0 ){
		byId('visited').value = 1; 
		byId('searchSpan').style.display = 'none';
	}else{
		$("#searchSpan").show();
	}
	
</script>