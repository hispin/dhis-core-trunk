<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <title>DHIS2 GIS Plugin</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<link rel="stylesheet" type="text/css" href="http://apps.dhis2.org/dev/dhis-web-commons/javascripts/ext/resources/css/ext-all-gray.css"/>

	<style>
		body	{font-family: sans-serif; margin: 0 0 0 60px;}
		h1		{font-size: 20px; margin: 30px 0 20px;}
	</style>

    <script src="https://maps.google.com/maps/api/js?sensor=false"></script>

    <script src="http://apps.dhis2.org/dev/dhis-web-commons/javascripts/ext/ext-all.js"></script>
    <script src="http://apps.dhis2.org/dev/dhis-web-mapping/app/scripts/openlayers/OpenLayers.js"></script>
    <script src="http://apps.dhis2.org/dev/dhis-web-mapping/app/scripts/custom.js"></script>

    <script src="http://apps.dhis2.org/dev/dhis-web-mapping/app/scripts/core.js"></script>

    <script src="http://apps.dhis2.org/dev/dhis-web-mapping/app/scripts/mapfish/MapFish.js"></script>
    <script src="http://apps.dhis2.org/dev/dhis-web-mapping/app/scripts/mapfish/core/Color.js"></script>
    <script src="http://apps.dhis2.org/dev/dhis-web-mapping/app/scripts/mapfish/core/Util.js"></script>
    <script src="http://apps.dhis2.org/dev/dhis-web-mapping/app/scripts/mapfish/core/GeoStat.js"></script>
    <script src="http://apps.dhis2.org/dev/dhis-web-mapping/app/scripts/mapfish/core/GeoStat/all.js"></script>

    <script src="http://apps.dhis2.org/dev/dhis-web-mapping/app/scripts/plugin.js"></script>

	<script>
		var base = "http://apps.dhis2.org/dev/",
			setLinks;

		setLinks = function() {
			GIS.getMap({
				url: base,
				el: "map1",
				id: "ytkZY3ChM6J"
			});

			GIS.getMap({
				url: base,
				el: "map2",
				mapViews: [{
					columns: [{dimension: 'in', items: [{id: 'Uvn6LCg7dVU'}]}], // data
					rows: [{dimension: 'ou', items: [{id: 'LEVEL-3'}, {id: 'ImspTQPwCqd'}]}], // organisation units
					filters: [{dimension: 'pe', items: [{id: 'LAST_3_MONTHS'}]}], // period
					classes: 7,
					colorLow: '02079c',
					colorHigh: 'e5ecff',
					opacity: 0.9
					//legendSet: {id: 'fqs276KXCXi'}
				}]
			});
		};

		Ext.onReady( function() {
			Ext.Ajax.request({
				url: base + "dhis-web-commons-security/login.action",
				method: "POST",
				params: { j_username: "admin", j_password: "district" },
				success: setLinks
			});
		});
	</script>
</head>

<body style="margin:10px 0 0 30px">

	<h1>MAP BY UID</h1>
	<div id="map1" style="width:700px; height:400px"></div>

	<h1>MAP BY CONFIG</h1>
	<div id="map2" style="width:700px; height:400px"></div>

</body>

</html>
