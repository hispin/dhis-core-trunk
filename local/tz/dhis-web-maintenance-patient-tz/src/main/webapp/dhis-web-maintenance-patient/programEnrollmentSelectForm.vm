<div>
    <input type="button" value="$i18n.getString( "back_to_search" )" onclick="loadPatientList();" style="width:10em">
</div>


<h3>$i18n.getString( "program_enrollment" )</h3>

<div id='programEnrollmentSelectDiv'>

    <input type="hidden" id="patientId" name="patientId" value="$patient.id">    

	<table>
		<tr>
			<td><strong>$i18n.getString( "full_name" ):</strong></td>
			<td>$encoder.htmlEncode( $patient.getFullName() )</td>
		</tr>
		<tr>
			<td><strong>$i18n.getString( "gender" ):</strong></td>
			<td>$encoder.htmlEncode( $patient.gender )</td>
		</tr>    
		<tr>
			<td><strong>$i18n.getString( "date_of_birth" ):</strong></td>
			<td>$format.formatDate( $patient.birthDate )</td>
		</tr>
		<tr>
			<td><strong>$i18n.getString( "age" ):</strong></td>
			<td>$encoder.htmlEncode( $patient.getAge() )</td>
		</tr>    
		<tr>
			<td>&nbsp;</td>
		</tr>
	</table>

	<hr style="clear:both">

	<table>    
		<tr>
			<td style="width:180px"><label for="programId">$i18n.getString( "program" )</label></td>
			<td>
				<select id="programId" name="programId" style='width:20.3em' onchange="showProgramEnrollmentForm('$patient.id', this.value);" style="min-width:200px" #if( $programs.size() == 0 ) disabled="disabled"#end>
					<option value="0">[$i18n.getString( "select" )]</option>
					#foreach( $program in $programs )
						<option value="$program.id">$encoder.htmlEncode( $program.name )</option>
					#end
				</select>
			</td>
		</tr>   
			
	</table>

	<table width="100%">
		<tr>
			<td style="width:180px"><label for="enrollmentDate">$i18n.getString( "date_of_enrollment" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
			<td><input type="text" id="enrollmentDate" name="enrollmentDate" style='width:20em'> <i>( <span id='enrollmentDateDescription'></span> )</i></td>
		</tr>
		
		<tr>
			<td style="width:180px"><label for="dateOfIncident">$i18n.getString( "date_of_incident" ) <em title="$i18n.getString( "required" )" class="required">*</em></label></td>
			<td><input type="text" id="dateOfIncident" name="dateOfIncident" style='width:20em'><i>( <span id='dateOfIncidentDescription'></span> )</i></td>
		</tr>
		<tr>
			<td></td>
			<td></td>   
			<td></td>                             
		</tr>
		
	</table>

	<table>
		<tr>
			<td style="width:180px">
				<input type="button" id='enrollBtn' name='enrollBtn' value="$i18n.getString( 'enroll' )" onclick='validateProgramEnrollment();' disabled="disabled" />
			</td>                                        
		</tr>
	</table>
</div>

<div id='programEnrollmentDiv' style='display:none;'></div>

<script>
	jQuery('#programEnrollmentSelectDiv').ready(
			function()
			{
                datePickerValid( 'enrollmentDate' );
                datePickerValid( 'dateOfIncident' );
			}
	);
</script>
