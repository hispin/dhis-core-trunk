<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
	"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
	"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
	<class name="org.hisp.dhis.vn.report.ReportExcel" table="reportexcel">
		<id name="id" column="reportid">
			<generator class="native" />
		</id>
		<property name="name"/>
		<property name="excelTemplateFile" column="exceltemplate" />
		<property name="periodRow" column="periodrow" />
		<property name="periodColumn" column="periodcolumn" />		
		<property name="organisationRow" column="rganisationrow" />
		<property name="organisationColumn" column="organisationcolumn" />		
		
		<set name="reportItems" cascade="all">
			<key column="reportid" />
			<one-to-many class="org.hisp.dhis.vn.report.ReportItem" />
		</set>	
		
		<set name="organisationAssocitions" table="reportexcelassociations">
			<key column="reportid"/>
			<many-to-many class="org.hisp.dhis.organisationunit.OrganisationUnit" column="organisationid"/>
		</set>	

		<joined-subclass name="org.hisp.dhis.vn.report.ReportExcelNormal" table="reportexcelnormal">
			<key column="reportid" />			
		</joined-subclass>

		<joined-subclass name="org.hisp.dhis.vn.report.ReportExcelPeriodListing"
			table="reportexcelperiodlisting">
			<key column="reportid" /> 			
		</joined-subclass>
		
		<joined-subclass name="org.hisp.dhis.vn.report.ReportExcelListing" table="reportexcellisting">
			<key column="reportid"/>
		</joined-subclass>
		

		<joined-subclass name="org.hisp.dhis.vn.report.ReportExcelCategory" table="reportexcelcategory">
			<key column="reportid"/>
			<list name="dataElements" table="reportcategory_dataelements">
				<key column="reportid"/>
				<list-index base="0" column="dataelement_order"/>
				<many-to-many class="org.hisp.dhis.dataelement.DataElement" column="dataelementid" foreign-key="fk_reportid_dataelementid"/>
		    </list>
			
			<many-to-one name="categoryCombo" class="org.hisp.dhis.dataelement.DataElementCategoryCombo" column="category_combo_id" foreign-key="fk_reportid_periodtypeid" lazy="false"/>
			
		</joined-subclass>
		
		<joined-subclass name="org.hisp.dhis.vn.report.ReportExcelGroupListing" table="reportexcelgrouplisting">
			
			<key column="reportid"/>
			
			<list  name="organisationUnitGroups" table="reportexcel_organisationgroup">
				<key column="reportid" />
				<list-index column="grouporder" base="0"/>				
				<many-to-many class="org.hisp.dhis.organisationunit.OrganisationUnitGroup" column="oganisationunitgroupid"
				foreign-key="fk_reportid_organisationgroupid"/>
			</list>	
		
		</joined-subclass>
		
	</class>
</hibernate-mapping>