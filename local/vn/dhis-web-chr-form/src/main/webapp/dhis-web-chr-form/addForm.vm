 <form name="editForm" id="editForm" method="post" action="">
    <table width="100%">
      <tr class="moduleheader">
        <td colspan="13" class="moduleheader"><font size="+1">$i18n.getString('update_object') - $!form.label</font></td>
      </tr>
  </table>
    <table width="100%">
      #set( $mark = true )
      #foreach($egroup in $egroups)
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
      </tr>
          <tr>
            <td colspan="6" #alternate( $mark ) >$!egroup.name</td>
          </tr>
      #set($i=0)
  <tr> #foreach($element in $egroup.elements)
    #if($i==3)
    #set($i=0) </tr>
  <tr> #end
	  <!-- Form link -->
  	#if($element.formLink != 0)
		<td>$element.label</td>
		<td><br>
  		#foreach($dt in $!parentObject)
			 $dt<br>
		#end
		</td>
    <!-- textfield -->
    #elseif($element.controlType == "checkbox")
    <td>$element.label</td>
    <td><input type="checkbox" name="data" id="data" ></td>
    <!-- textarea -->
    #elseif($element.controlType == "textarea")
    <td>$element.label
      #if($element.required == "Yes") <font color="#FF0000">*</font> #end </td>
    <td><textarea name="data" id="data" value="$!element.initialValue" onBlur="javascript : var strerror =  '$i18n.getString("value_not_null")';  validateObject('$element.required', this, strerror); "/></textarea>    </td>
    <!-- combobox -->
    #elseif($element.controlType == "combobox")
    <td>$element.label
      #if($element.required == "Yes") <font color="#FF0000">*</font> #end </td>
    <td><!--<select style="width:145px;" name="data" id="data" onBlur="javascript : validateObject($element.required, this.value); ">
    </select> -->
    <div id='$element.name' > 
						  <select style=" width:145px;" id="data" name="data" onFocus="javascript: var select = '<select style=width:145px id=data name=data >'; fillup(select,'$element.initialValue', '$element.name');" ></select>
					  </div>
       </td>
    <!-- date -->
    #elseif($element.controlType == "date")
    <td>$element.label
      #if($element.required == "Yes") <font color="#FF0000">*</font> #end </td>
    <td>
    <div id="date$element.id">
    <input name="data" id="data" type="text" value="$!element.initialValue" width="180px" onBlur="javascript : var strerror =  '$i18n.getString("value_not_null")';  validateObject('$element.required', this, strerror); if(this.value != ''){var strerror =  '$i18n.getString("not_date")'; isDate(this, strerror);}"/>
    </div>
        <img src="images/cal.gif"  alt="Click Here to Pick up the date" width="16" height="16" border="no" onClick="displayCalendar(document.getElementById('date$element.id').getElementsByTagName('input')[0],'yyyy-mm-dd',this,true)"/>
         </a> </td>
    <!-- Text field -->
    #elseif($element.controlType == "textfield")
    <td>$element.label
     #if($element.required == "Yes") <font color="#FF0000">*</font> #end </td>
    <td> #set ($ses = $req.getSession())
      #set ($maso = 'maso')
      <input name="data" id="data" type="$element.controlType" value="$!element.initialValue" width="180px" onKeyPress="javascript: if( isNumber('$element.type')){return keyRestrict(event,'1234567890');};" onBlur="javascript : var strerror =  '$i18n.getString("value_not_null")';  validateObject('$element.required', this, strerror) "/></td>
    #elseif($element.controlType == "break")
    <td></td>
    <td><input name="data" id="data" type="hidden" value="">    </td>
    #elseif($element.controlType == "autocompleted")
    <td>$element.label
      #if($element.required == "Yes") <font color="#FF0000">*</font> #end </td>
    <td><input name="data" id="data" type="text" width="180px" value="$!element.initialValue" onBlur="javascript: var strerror =  '$i18n.getString("value_not_null")';  validateObject('$element.required', this, strerror) "/>
    </td>
    #elseif($element.controlType == "tree")
    <td>$element.label
      #if($element.required == "Yes") <font color="#FF0000">*</font> #end </td>
    <td>
    	<div id="$element.id" name="$element.id">
	    	<input name="data" id="data" type="text" width="180px" value="$!element.initialValue" onBlur="javascript : var strerror =  '$i18n.getString("value_not_null")';  validateObject('$element.required', this, strerror); "/>
        </div>
     	    <input type="button"  value="" onClick="javascript: openOrganisationUnitTree('$element.id', 'selectionTree$element.id');">
        <div id="selectionTree$element.id" style="display:none; position:fixed; border:thin; background-color:#FFFFCC; height:350px; width:150px; overflow:scroll"> Tree </div>
    </td>
    #end
    
    #set($i = $i + 1)
    #end
    
    #end </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr class="formcontrol">
    <td height="25" colspan="6"  align="center"><input name="Submit" type="button" value="  $i18n.getString('save')   " onClick="javascript: addObject();">
        <input name="Submit2" type="button" value=" $i18n.getString('cancel') " onClick=""></td>
  </tr>
    </table>
</form>

<span id="message"></span>
<script type="text/javascript">

	flag = true;
	div = null;
	function openOrganisationUnitTree(div_id_value, div_id_tree){
		div = document.getElementById(div_id_value);
		var div_tree = document.getElementById(div_id_tree).style;
		if(flag){
			div_tree.display = 'block';
			flag = false;
		}else{
			div_tree.display = 'none';
			flag = true;
		}
	}
  
	function treeClicked()
	{
		numberOfSelects++;

		setMessage( i18n_loading );

		div.innerHTML = "<input name='data' id='data' type='text' width='180px' value = 'fadfasf'/>";
		//document.getElementById( "data" ).disabled = false;
	}

</script>
<span id="info" style="display:none;top:70px;right:5px;position:fixed;" onClick="hideById(this.id)"></span>