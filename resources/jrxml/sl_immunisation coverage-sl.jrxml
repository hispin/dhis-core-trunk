<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="immunisation_coverages_incl_parent" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.610510000000002"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<subDataset name="parent_data">
		<queryString>
			<![CDATA[select

organisationunitname as parent_name,
bcg_coverage_lt_1_a_reporting_month as parent_bcg_rm,
bcg_coverage_lt_1_a_last3_months as parent_bcg_l3 ,
penta3_coveragea_reporting_month as parent_penta_rm,
penta3_coveragea_last3_months as parent_penta_l3 ,
measles_cov_lt_1_a_reporting_month as parent_measles_rm,
measles_cov_lt_1_a_last3_months as parent_measles_l3,
fullyimmunizedcova_reporting_month as parent_fully_rm,
fullyimmunizedcova_last3_months as parent_fully_l3

from _REPORT_IMMUNISATION_COVERAGES_PARENT where organisationunitid IN ( select child.parentid from _REPORT_IMMUNISATION_COVERAGES report, organisationunit child
where report.organisationunitid=child.organisationunitid)]]>
		</queryString>
		<field name="PARENT_NAME" class="java.lang.String"/>
		<field name="PARENT_BCG_RM" class="java.lang.Double"/>
		<field name="PARENT_BCG_L3" class="java.lang.Double"/>
		<field name="PARENT_PENTA_RM" class="java.lang.Double"/>
		<field name="PARENT_PENTA_L3" class="java.lang.Double"/>
		<field name="PARENT_MEASLES_RM" class="java.lang.Double"/>
		<field name="PARENT_MEASLES_L3" class="java.lang.Double"/>
		<field name="PARENT_FULLY_RM" class="java.lang.Double"/>
		<field name="PARENT_FULLY_L3" class="java.lang.Double"/>
	</subDataset>
	<queryString>
		<![CDATA[SELECT
 organisationunitname,
 reporting_month_name,
 BCG_COVERAGE_LT_1_A_REPORTING_MONTH,
 BCG_COVERAGE_LT_1_A_LAST3_MONTHS,
 PENTA3_COVERAGEA_REPORTING_MONTH,
 PENTA3_COVERAGEA_LAST3_MONTHS,
 MEASLES_COV_LT_1_A_REPORTING_MONTH,
 MEASLES_COV_LT_1_A_LAST3_MONTHS,
 FULLYIMMUNIZEDCOVA_REPORTING_MONTH,
 FULLYIMMUNIZEDCOVA_LAST3_MONTHS,
 0 as sortorder

FROM
     _report_immunisation_coverages

UNION

select

organisationunitname,
reporting_month_name,
bcg_coverage_lt_1_a_reporting_month,
bcg_coverage_lt_1_a_last3_months,
penta3_coveragea_reporting_month,
penta3_coveragea_last3_months,
measles_cov_lt_1_a_reporting_month,
measles_cov_lt_1_a_last3_months,
fullyimmunizedcova_reporting_month,
fullyimmunizedcova_last3_months,
1 as sortorder

from _REPORT_IMMUNISATION_COVERAGES_PARENT where organisationunitid IN ( select child.parentid from _REPORT_IMMUNISATION_COVERAGES report, organisationunit child
where report.organisationunitid=child.organisationunitid)
order by sortorder, organisationunitname]]>
	</queryString>
	<field name="ORGANISATIONUNITNAME" class="java.lang.String"/>
	<field name="REPORTING_MONTH_NAME" class="java.lang.String"/>
	<field name="BCG_COVERAGE_LT_1_A_REPORTING_MONTH" class="java.lang.Double"/>
	<field name="BCG_COVERAGE_LT_1_A_LAST3_MONTHS" class="java.lang.Double"/>
	<field name="PENTA3_COVERAGEA_REPORTING_MONTH" class="java.lang.Double"/>
	<field name="PENTA3_COVERAGEA_LAST3_MONTHS" class="java.lang.Double"/>
	<field name="MEASLES_COV_LT_1_A_REPORTING_MONTH" class="java.lang.Double"/>
	<field name="MEASLES_COV_LT_1_A_LAST3_MONTHS" class="java.lang.Double"/>
	<field name="FULLYIMMUNIZEDCOVA_REPORTING_MONTH" class="java.lang.Double"/>
	<field name="FULLYIMMUNIZEDCOVA_LAST3_MONTHS" class="java.lang.Double"/>
	<field name="SORTORDER" class="java.lang.Integer"/>
	<variable name="variable1" class="java.lang.String"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="60" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="57" splitType="Stretch">
			<textField>
				<reportElement x="10" y="10" width="555" height="26"/>
				<textElement textAlignment="Center">
					<font size="20" isBold="true"/>
				</textElement>
				<textFieldExpression class="java.lang.String"><![CDATA["Immunisation coverages  -  "+ $F{REPORTING_MONTH_NAME}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="61" splitType="Stretch">
			<staticText>
				<reportElement mode="Opaque" x="0" y="0" width="97" height="60" backcolor="#CCCCCC"/>
				<box>
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement/>
				<text><![CDATA[]]></text>
			</staticText>
			<elementGroup>
				<elementGroup>
					<staticText>
						<reportElement mode="Opaque" x="193" y="20" width="48" height="40" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="11" isBold="true"/>
						</textElement>
						<text><![CDATA[This month]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="289" y="20" width="48" height="40" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="11" isBold="true"/>
						</textElement>
						<text><![CDATA[This month]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="337" y="20" width="48" height="40" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="11" isBold="true"/>
						</textElement>
						<text><![CDATA[Last 3 months]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="97" y="0" width="96" height="20" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="12" isBold="true"/>
						</textElement>
						<text><![CDATA[BCG]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="193" y="0" width="96" height="20" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="12" isBold="true"/>
						</textElement>
						<text><![CDATA[Penta3]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="145" y="20" width="48" height="40" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="11" isBold="true"/>
						</textElement>
						<text><![CDATA[Last 3 months]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="385" y="0" width="108" height="20" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="12" isBold="true"/>
						</textElement>
						<text><![CDATA[Fully Immunised]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="241" y="20" width="48" height="40" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="11" isBold="true"/>
						</textElement>
						<text><![CDATA[Last 3 months]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="289" y="0" width="96" height="20" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="12" isBold="true"/>
						</textElement>
						<text><![CDATA[Measles]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="97" y="20" width="48" height="40" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="11" isBold="true"/>
						</textElement>
						<text><![CDATA[This month]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="444" y="20" width="49" height="40" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="11" isBold="true"/>
						</textElement>
						<text><![CDATA[Last 3 months]]></text>
					</staticText>
					<staticText>
						<reportElement mode="Opaque" x="385" y="20" width="59" height="40" backcolor="#CCCCCC"/>
						<box>
							<topPen lineWidth="0.5" lineStyle="Solid"/>
							<leftPen lineWidth="0.5" lineStyle="Solid"/>
							<bottomPen lineWidth="0.5" lineStyle="Solid"/>
							<rightPen lineWidth="0.5" lineStyle="Solid"/>
						</box>
						<textElement textAlignment="Center">
							<font size="11" isBold="true"/>
						</textElement>
						<text><![CDATA[This month]]></text>
					</staticText>
				</elementGroup>
			</elementGroup>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="97" y="0" width="48" height="20"/>
				<box leftPadding="0" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{BCG_COVERAGE_LT_1_A_REPORTING_MONTH}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="145" y="0" width="48" height="20"/>
				<box leftPadding="0" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{BCG_COVERAGE_LT_1_A_LAST3_MONTHS}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="193" y="0" width="48" height="20"/>
				<box leftPadding="0" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{PENTA3_COVERAGEA_REPORTING_MONTH}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="241" y="0" width="48" height="20"/>
				<box leftPadding="0" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{PENTA3_COVERAGEA_LAST3_MONTHS}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="289" y="0" width="48" height="20"/>
				<box leftPadding="0" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{MEASLES_COV_LT_1_A_REPORTING_MONTH}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="337" y="0" width="48" height="20"/>
				<box leftPadding="0" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{MEASLES_COV_LT_1_A_LAST3_MONTHS}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="385" y="0" width="59" height="20"/>
				<box leftPadding="0" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{FULLYIMMUNIZEDCOVA_REPORTING_MONTH}]]></textFieldExpression>
			</textField>
			<textField pattern="">
				<reportElement x="0" y="0" width="97" height="20"/>
				<box leftPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{ORGANISATIONUNITNAME}]]></textFieldExpression>
			</textField>
			<textField pattern="">
				<reportElement x="444" y="0" width="49" height="20"/>
				<box leftPadding="0" rightPadding="2">
					<topPen lineWidth="0.5" lineStyle="Solid"/>
					<leftPen lineWidth="0.5" lineStyle="Solid"/>
					<bottomPen lineWidth="0.5" lineStyle="Solid"/>
					<rightPen lineWidth="0.5" lineStyle="Solid"/>
				</box>
				<textElement textAlignment="Right"/>
				<textFieldExpression class="java.lang.Double"><![CDATA[$F{FULLYIMMUNIZEDCOVA_LAST3_MONTHS}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="21" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="16" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="268" splitType="Stretch">
			<barChart>
				<chart isShowLegend="false">
					<reportElement x="126" y="56" width="289" height="169"/>
					<chartTitle>
						<font size="14" isBold="true"/>
						<titleExpression><![CDATA["Immunisation coverage for " + ($F{SORTORDER} == 1 ? $F{ORGANISATIONUNITNAME} : "") + " last 3 months"]]></titleExpression>
					</chartTitle>
					<chartSubtitle/>
					<chartLegend/>
				</chart>
				<categoryDataset>
					<dataset>
						<datasetRun subDataset="parent_data"/>
					</dataset>
					<categorySeries>
						<seriesExpression><![CDATA["Immunisation coverage last 3 months (%)"]]></seriesExpression>
						<categoryExpression><![CDATA["BCG"]]></categoryExpression>
						<valueExpression><![CDATA[$F{PARENT_BCG_L3}]]></valueExpression>
						<itemHyperlink>
							<hyperlinkTooltipExpression><![CDATA[$F{PARENT_BCG_L3}.toString()]]></hyperlinkTooltipExpression>
						</itemHyperlink>
					</categorySeries>
					<categorySeries>
						<seriesExpression><![CDATA["Immunisation coverage last 3 months (%)"]]></seriesExpression>
						<categoryExpression><![CDATA["Penta3"]]></categoryExpression>
						<valueExpression><![CDATA[$F{PARENT_PENTA_L3}]]></valueExpression>
						<itemHyperlink>
							<hyperlinkTooltipExpression><![CDATA[$F{PARENT_PENTA_L3}.toString()]]></hyperlinkTooltipExpression>
						</itemHyperlink>
					</categorySeries>
					<categorySeries>
						<seriesExpression><![CDATA["Immunisation coverage last 3 months (%)"]]></seriesExpression>
						<categoryExpression><![CDATA["Measles"]]></categoryExpression>
						<valueExpression><![CDATA[$F{PARENT_MEASLES_L3}]]></valueExpression>
						<itemHyperlink>
							<hyperlinkTooltipExpression><![CDATA[$F{PARENT_MEASLES_L3}.toString()]]></hyperlinkTooltipExpression>
						</itemHyperlink>
					</categorySeries>
				</categoryDataset>
				<barPlot>
					<plot/>
					<itemLabel color="#000000" backgroundColor="#FFFFFF"/>
					<categoryAxisFormat>
						<axisFormat>
							<labelFont/>
							<tickLabelFont/>
						</axisFormat>
					</categoryAxisFormat>
					<valueAxisLabelExpression><![CDATA["%"]]></valueAxisLabelExpression>
					<valueAxisFormat>
						<axisFormat>
							<labelFont>
								<font size="14" isBold="false"/>
							</labelFont>
							<tickLabelFont/>
						</axisFormat>
					</valueAxisFormat>
				</barPlot>
			</barChart>
		</band>
	</summary>
</jasperReport>
